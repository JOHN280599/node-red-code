[
    {
        "id": "913a9fc678d69bed",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "30e1365ebf8cb310",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "SQL",
        "style": {
            "label": true
        },
        "nodes": [
            "d5cddaff28df0951",
            "599d83994af2d2da",
            "e4c1d956d18d56bd",
            "4ab5aa7515e20a3b",
            "4d08713d6e8dd6f3",
            "82c73a5af8a344c9",
            "7805f0658d451b65",
            "2bdda19b0d6b6715",
            "52a594e7dac99cc0",
            "1e86604ab2b61ec6",
            "c8a8675d04359fc0",
            "e5f3657f5801c9fb",
            "6f70b23d2102eac1",
            "4af0cf8ca249e05e",
            "34dbb196c548a579",
            "e66f6288d3c00f7d",
            "0c7bf62d7d5cb7a8",
            "8e2ae95d3c7b83db",
            "361b19baed48fc44",
            "bb56c6170c3e53b1",
            "b01aecdf62829af9",
            "db34c81277bc3b91",
            "ae555b5ca42a9bb5",
            "f8825d1762473e0f",
            "b64f89f4280574ef",
            "bd127eb68165e31a",
            "87c151b202e16940",
            "7ca06a650b5bb776",
            "fe2614e0f5358ebd",
            "926012ee5f626d7a",
            "fbb50dae352ed154",
            "31944e134334543e",
            "7df0e6be664f9dbc",
            "eed75d263eb5f67e",
            "b46d164480d90e89",
            "b8fab216f8efc460",
            "d62abcf87230a694",
            "2fc401566f9fda86"
        ],
        "x": 234,
        "y": 1359,
        "w": 1032,
        "h": 542
    },
    {
        "id": "09dc50047470ab58",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị1",
        "style": {
            "label": true
        },
        "nodes": [
            "2682802a1550246c",
            "497e5a2c32140ce3",
            "4545fe350be94aa5",
            "d27c8d048b1e3d69",
            "12f82f5089b89a86",
            "81cf401ca8bef268",
            "ea0706e62dca91c0",
            "6b991fcb1dcbd597",
            "7651fa6fdc4e42dd",
            "056a66a5f936e805",
            "7d3e3157452e5b74",
            "fee5f0535b199e71",
            "c20488fb44a265c3",
            "daab0b690228ba5b",
            "116fc5fcb1bf9255",
            "d614f6868aa2d493",
            "5de4a048c44f9b4c",
            "451414a9753c94b1",
            "3d124aa54f3a7a8c",
            "6395b0865161c315",
            "c8009663084a1e26",
            "33ca58347fa56dca",
            "0a2ea93f1f7c922c",
            "33cc393e3f4cd2e1",
            "e02614e2d13231cc",
            "bb0f0c8f0befdd86",
            "b0b496446f56abd3",
            "ce7b5b4a0d036ef1",
            "90553c0e33abada7",
            "0863567d97c7b2d4",
            "d0da189bb3ad7b55",
            "cb537d2b32482a6d",
            "8a538087a77a549d",
            "d3e793e7ed477bbd"
        ],
        "x": 1374,
        "y": 119,
        "w": 1092,
        "h": 602
    },
    {
        "id": "34d649120bb9f575",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị2",
        "style": {
            "label": true
        },
        "nodes": [
            "cf67d99667f1f3eb",
            "c21f918542e73adb",
            "80f6ecc673d9596f",
            "ca432c321b4057c6",
            "bb6b6da22a9df3f8",
            "45545a6e7ee15640",
            "0f291887819649f7",
            "437f3bf7f8095998",
            "0f3b38ede2dabf0d",
            "c46da8203c19c0b9",
            "b62db736f4432be5",
            "1f79c27234deb4ec",
            "4a6ff0add244edad",
            "9be9784f5926e16a",
            "1e53db31aedba0a1",
            "1a81d9f15ea12057",
            "b3c3bbc547d4619c",
            "2f6a68d8a796e86a",
            "32dc0fca27183206",
            "e710075acbffce60",
            "481b91e4d62059d8",
            "09c4c4d7ca128f9b",
            "9c53dce39cb75dd9",
            "f38b600fd402e195",
            "3e55a1a06d9d2a0c",
            "fc3cd02ae7fc1ddc",
            "2b79159ac9961915",
            "9c78c6ca093ba3a4",
            "4b41e29ec958532d",
            "d31d07fda60f46fd",
            "900577792fc616dd",
            "629b6e3ef310469b",
            "09f5b6efead2b8f8",
            "3647b6c2cd04d111"
        ],
        "x": 2514,
        "y": 119,
        "w": 1092,
        "h": 602
    },
    {
        "id": "03b8df6aada9f510",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị 3",
        "style": {
            "label": true
        },
        "nodes": [
            "977c3058a87d834e",
            "31fe82edd6325a2b",
            "35712211924edf49",
            "d97da3d2470e7b03",
            "15fa8c2d8f6b5491",
            "d6f4a3511d992b51",
            "10266d9f30b72ce3",
            "1b8102e6cf577c17",
            "63a6160a9bf221ac",
            "d3c827da689d3dc7",
            "dd16fa9c26b01cbe",
            "682625a234d20c1a",
            "70ea981f573b879b",
            "3f5490a35ea058fa",
            "cbd50c920edb8639",
            "64b1a55efd371320",
            "7fc7dcc89047c2f1",
            "b7c23accf25bc5a4",
            "3b8a8d05aa3f846e",
            "576f4f92f58b65ef",
            "0754a53682ea3381",
            "7b1a052c78649436",
            "78224bef95847bb3",
            "c782c5bcd9b28755",
            "fed289a7ec6fb6a4",
            "9f73510f16681e3e",
            "4c58bc0ce32dad15",
            "eb2a0fa4d56e6a46",
            "6a1e4b38953d5b5d",
            "b823ad600681868a",
            "edd2de5bc6554f13",
            "5c18117dc2e07b60",
            "c80bb091197a614c",
            "b54e94eb38af3e89"
        ],
        "x": 234,
        "y": 739,
        "w": 1092,
        "h": 602
    },
    {
        "id": "86570ca980073f6e",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị 4",
        "style": {
            "label": true
        },
        "nodes": [
            "b1cb741da97dec16",
            "aea1a5feb2e1dc69",
            "6b1485f7b438bf20",
            "8b360d47bf444aea",
            "5e1c46b73f4ed257",
            "8c066fedcf2c149e",
            "db7c412f19c1929d",
            "74d181caab69034a",
            "49230089016f5f8f",
            "6cbc18dc815612db",
            "56ed3c40b48df477",
            "4056ef2fad8021c3",
            "fd4eb110e7e4aee6",
            "c160b96974606005",
            "0706141b1925d02f",
            "e8ee5657bca6da03",
            "0481ad4b6c9ff52a",
            "3e492832d09d5a11",
            "1ec1bae4351f8108",
            "84da74c22f6d641e",
            "4e128b0f05d315ef",
            "34e22a1590e2d4bf",
            "b06f0da1a2ba51e4",
            "0f5b8b59aad205c9",
            "4c4fd6adbabc655e",
            "dbba90490675f878",
            "66ea59a90b7ceec4",
            "0b55248e5bed14fb",
            "61f0d8197af544dd",
            "0c850937f17be76f",
            "070d2c397f697f38",
            "7270830ad5375b80",
            "fc26cc661b28be3f",
            "7ff1187ab2a6085a"
        ],
        "x": 1374,
        "y": 739,
        "w": 1092,
        "h": 602
    },
    {
        "id": "c3f2bd801acbf604",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị 5",
        "style": {
            "label": true
        },
        "nodes": [
            "da2c14ddd1db3f68",
            "e2b09619d51fb020",
            "8bfbd5ae54b9389e",
            "09189b391dcf5835",
            "7a1c229072ee0ffb",
            "8eeadd24560d261a",
            "bdd3477a23a326f4",
            "b298c2f355ef0cc0",
            "4b264ff9937e1ac1",
            "8f347e7d133a5edb",
            "6818c4f0ad0ef526",
            "6954c0ea5cb7396d",
            "fe994000f562a3df",
            "7b4371ea4f3bbb8f",
            "8e1f70fc8f93a5c9",
            "35534769ccb1ac0c",
            "57824d699d3fd09d",
            "5546c3c1e656492f",
            "400d60942f902032",
            "e4a8395ec69957be",
            "fc93473c419f1a7a",
            "19157b50d212866a",
            "208e7cd963e26545",
            "988f7a13d5b119e4",
            "ff451b3c8b325df6",
            "c4c628c491b91e4d",
            "c7676f2724cc3271",
            "4c8c555529b9d60d",
            "1b43dfe9ef26d635",
            "b2ec86fdd86bf11e",
            "d2cefa2b350a36f3",
            "e460eee5fccd8e5b",
            "9a602a33d754e50a",
            "3738b37ad9b5c494"
        ],
        "x": 2514,
        "y": 739,
        "w": 1092,
        "h": 602
    },
    {
        "id": "60e6c56c14748795",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối hiển thị",
        "style": {
            "label": true
        },
        "nodes": [
            "ea045d18de83af16",
            "dbe1c606af473d6b",
            "aeb293f70c104947",
            "3815e1813461c7b0",
            "a2c14984fa7c2dfb",
            "83e7695f02acac2d",
            "4e9c706c8c130405",
            "960966b9ebd2c459",
            "974a592bc36eba52",
            "3b8f07a12b30458e",
            "387b8cee1b853dfe",
            "59fc35eb42990ec8",
            "880fa42946450f9a",
            "49aaa1a524913e88",
            "8db8ef7dfbda6ce4",
            "031205f9558e00a4",
            "b6aab81c5435a684",
            "ba3898a44b146461",
            "d5e63f2e37a3449c",
            "25782877a4d6c659",
            "7535e422dc81e383",
            "069b7b2389d29bdd",
            "4738ae40c62bee6d",
            "4142af6f095c1911",
            "083f9e7a8a63b004",
            "a32f28ef2cb7335a",
            "2ad3a25722458273",
            "d0985a683e9183d7",
            "2a6de21db04b7c81",
            "b390f4e28e9a67ba",
            "a17d8dd10c527e16",
            "5e113d4eb2c4758f",
            "37d0d5aa131c5ae8"
        ],
        "x": 234,
        "y": 119,
        "w": 1092,
        "h": 602
    },
    {
        "id": "349d337beae3dc76",
        "type": "group",
        "z": "913a9fc678d69bed",
        "name": "khối điều khiển",
        "style": {
            "label": true
        },
        "nodes": [
            "7db9333f5c9ff737",
            "4d53414835fbffc7",
            "6b0e6310e12d1d57",
            "11c34486b25b9edc",
            "21511a18635f25be",
            "88d32ec039eb2153",
            "258ea240fcf9e0f6",
            "9222407eede9351c",
            "f71d480bfb00a68b",
            "f987cc04d0c9c2b7",
            "a9be00faf8ed196a",
            "84be8cb8dc75ac3f",
            "1b04c3c018fb59a5",
            "70d5a7269abdac8c",
            "574eb80b90bbb0b0",
            "16d6dc6814cc4d9b",
            "abc103af3bc95e17",
            "8e7436ce8cf6b954",
            "dde468aee7c8e01c",
            "88a37e06df70f6a1",
            "ab652dddb63be93c",
            "9eaf0dcb8859b44f",
            "1c4d024f51dfe253",
            "e326263fed8979a1",
            "6d6c36cd3b5a94a1",
            "6d2df0dc0c11e020",
            "fd928ac93466a1b8",
            "b0d5e912e85823b9",
            "eca6d0c835bf7ff6",
            "93b4ba9cfc12a7d1",
            "d86418815e7fceeb",
            "ab284f08fac87082",
            "5a355769f3e9365c",
            "4f379782c241ca6e",
            "5cfa8b95e1c39c37",
            "2d065e4332f7a340",
            "aabf7e885616dad4"
        ],
        "x": 1374,
        "y": 1376.5,
        "w": 792,
        "h": 704.5
    },
    {
        "id": "d5cddaff28df0951",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 850,
        "y": 1400,
        "wires": [
            [
                "c8a8675d04359fc0",
                "82c73a5af8a344c9",
                "db34c81277bc3b91",
                "eed75d263eb5f67e"
            ]
        ]
    },
    {
        "id": "599d83994af2d2da",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "lấy dữ liệu sql",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 360,
        "y": 1400,
        "wires": [
            [
                "0c7bf62d7d5cb7a8"
            ]
        ]
    },
    {
        "id": "e4c1d956d18d56bd",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "group": "3c5da821.6d5638",
        "order": 4,
        "width": 23,
        "height": 8,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "SSS",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1160,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "4ab5aa7515e20a3b",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 710,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "4d08713d6e8dd6f3",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "name": "Bảng hiển thị",
        "order": 3,
        "width": 23,
        "height": 3,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Thời gian</th>\n        <th>Nhiệt độ 1</th>\n        <th>Nhiệt độ 2</th>\n        <th>Nhiệt độ 3</th>\n        <th>Nhiệt độ 4</th>\n        <th>Độ ẩm 1</th>\n        <th>Độ ẩm 2</th>\n        <th>Độ ẩm 3</th>\n        <th>Độ ẩm 4</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1170,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "82c73a5af8a344c9",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 4",
        "func": "var data1 = [];\nvar data2 = []; //flow.get(\"table\")||[];\nvar data3 = [];\nvar data4 = [];\nvar data5 = [];\nvar temp1 = 0;\nvar temp2 = 0;\nvar temp3 = 0;\nvar temp4 = 0;\nvar GT = flow.get(\"GiaTriCanThiet\");\nvar TS = \"\";\nfor (var i = 0; i < msg.payload.length; i++) {\n    temp1 = msg.payload[i].ND1\n    temp2 = msg.payload[i].ND2\n    temp3 = msg.payload[i].ND3\n    temp4 = msg.payload[i].ND4\n    TS = msg.payload[i].Atime\n    data1.push(\n        {\n            \"x\": i,\n            \"y\": temp1\n        }\n    )\n    data2.push(\n        {\n            \"x\": i,\n            \"y\": temp2\n        }\n    )\n    data3.push(\n        {\n            \"x\": i,\n            \"y\": temp3\n        }\n    )\n    data4.push(\n        {\n            \"x\": i,\n            \"y\": temp4\n        }\n    )\n    data5.push(\n        {\n            \"x\": i,\n            \"y\": GT\n        }\n    )\n\n}\n\nmsg.payload = [{\n    \"series\": [\"Nhiệt độ 1\", \"Nhiệt độ 2\", \"Nhiệt độ 3\", \"Nhiệt độ 4\", \"Nhiệt độ cài\"],\n    \"data\": [data1,data2,data3,data4,data5],\n    \"labels\": []\n}];\nmsg.topic = \"Data set 1\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1440,
        "wires": [
            [
                "e4c1d956d18d56bd"
            ]
        ]
    },
    {
        "id": "7805f0658d451b65",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "to SQL1",
        "func": "var i = flow.get(\"time0\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp1\") || 0;\nvar temp2 = flow.get(\"Temp2\") || 0;\nvar temp3 = flow.get(\"Temp3\") || 0;\nvar temp4 = flow.get(\"Temp4\") || 0;\nvar humi1 = flow.get(\"Humi1\") || 0;\nvar humi2 = flow.get(\"Humi2\") || 0;\nvar humi3 = flow.get(\"Humi3\") || 0;\nvar humi4 = flow.get(\"Humi4\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep0` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time0\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1540,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "2bdda19b0d6b6715",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Room",
        "payloadType": "flow",
        "x": 350,
        "y": 1540,
        "wires": [
            [
                "7805f0658d451b65",
                "d882e26bde46d056",
                "bd127eb68165e31a",
                "87c151b202e16940",
                "7ca06a650b5bb776",
                "fe2614e0f5358ebd",
                "926012ee5f626d7a"
            ]
        ]
    },
    {
        "id": "52a594e7dac99cc0",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 1780,
        "wires": [
            [
                "1e86604ab2b61ec6"
            ]
        ]
    },
    {
        "id": "1e86604ab2b61ec6",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "delete SQL",
        "func": "var Room = flow.get(\"Room\")||0\nmsg.topic = \"DELETE FROM `nhietdodoam`.`doantotnghiep\"+Room+\"`;\"\nflow.set(\"time\"+Room,1);\nflow.set(\"jump\",0)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1780,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "c8a8675d04359fc0",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 3",
        "func": "var arr = []; //flow.get(\"table\")||[];\nvar temp1 = 0;\nvar temp2 = 0;\nvar temp3 = 0;\nvar temp4 = 0;\nvar humi1 = 0;\nvar humi2 = 0;\nvar humi3 = 0;\nvar humi4 = 0;\nvar TS = \"\";\nfor (var i = 0; i < msg.payload.length; i++) {\n    temp1 = msg.payload[i].ND1\n    temp2 = msg.payload[i].ND2\n    temp3 = msg.payload[i].ND3\n    temp4 = msg.payload[i].ND4\n    humi1 = msg.payload[i].DA1\n    humi2 = msg.payload[i].DA2\n    humi3 = msg.payload[i].DA3\n    humi4 = msg.payload[i].DA4\n    TS  = msg.payload[i].Atime\n    arr.push(\n        {\n            \"Thời gian\": TS,\n            \"Nhiệt độ 1\": temp1,\n            \"Nhiệt độ 2\": temp2,\n            \"Nhiệt độ 3\": temp3,\n            \"Nhiệt độ 4\": temp4,\n            \"Độ ẩm 1\": humi1,\n            \"Độ ẩm 2\": humi2,\n            \"Độ ẩm 3\": humi3,\n            \"Độ ẩm 4\": humi4 \n        }\n    )\n\n}\n//flow.set(\"table\",arr)\nmsg.payload = arr\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1400,
        "wires": [
            [
                "4d08713d6e8dd6f3"
            ]
        ]
    },
    {
        "id": "e5f3657f5801c9fb",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "Get SQL data",
        "func": "var Room = flow.get(\"Room\")||0\nvar start = flow.get(\"start\") || 0;\nvar stop = flow.get(\"stop\") || 0;\nvar timepic = flow.get(\"timepic\") || 0;\nif (msg.payload == false) {\n    var time = flow.get(\"time\"+Room) || 0;\n    if (time >= 60) {\n        start = time;\n        stop = time - 60\n        flow.set(\"start\", start)\n        flow.set(\"stop\", stop)\n    }\n    if (time < 60 )\n    {\n        start = time\n        stop = 1\n        flow.set(\"start\", start)\n        flow.set(\"stop\", stop)\n    }\n    flow.set(\"jump\", 0)\n    flow.set(\"timehold\", time)\n        msg.topic = \"SELECT * FROM `nhietdodoam`.`doantotnghiep\"+Room+\"` where `STT` >=\" + stop + \" and `STT` <= \" + start + \" ;\"\n        msg.payload = time\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1400,
        "wires": [
            [
                "d5cddaff28df0951"
            ]
        ]
    },
    {
        "id": "6f70b23d2102eac1",
        "type": "ui_dropdown",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "label": "bước nhảy",
        "tooltip": "",
        "place": "Select option",
        "group": "3c5da821.6d5638",
        "order": 15,
        "width": 4,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "giây",
                "value": 1,
                "type": "num"
            },
            {
                "label": "phút",
                "value": 60,
                "type": "num"
            },
            {
                "label": "giờ",
                "value": 3600,
                "type": "num"
            },
            {
                "label": "ngày",
                "value": 86400,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 950,
        "y": 1740,
        "wires": [
            [
                "4af0cf8ca249e05e"
            ]
        ]
    },
    {
        "id": "4af0cf8ca249e05e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "cài đặt bước nhảy",
        "func": "var timepic = msg.payload\nflow.set(\"timepic\",timepic);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "34dbb196c548a579",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "group": "3c5da821.6d5638",
        "order": 13,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "⬅",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "+",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 950,
        "y": 1800,
        "wires": [
            [
                "361b19baed48fc44"
            ]
        ]
    },
    {
        "id": "e66f6288d3c00f7d",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "group": "3c5da821.6d5638",
        "order": 18,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "➡",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "-",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 950,
        "y": 1840,
        "wires": [
            [
                "361b19baed48fc44"
            ]
        ]
    },
    {
        "id": "0c7bf62d7d5cb7a8",
        "type": "ui_switch",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "label": "HOLD",
        "tooltip": "",
        "group": "3c5da821.6d5638",
        "order": 17,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 510,
        "y": 1400,
        "wires": [
            [
                "e5f3657f5801c9fb",
                "8e2ae95d3c7b83db"
            ]
        ]
    },
    {
        "id": "8e2ae95d3c7b83db",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 5",
        "func": "var start = 0;\nvar stop = 0;\nvar Room = flow.get(\"Room\")||0\nvar timepic = flow.get(\"timepic\") || 0;\nif (msg.payload == true) {\n    var time = flow.get(\"timehold\") || 0;\n    var Jump = flow.get(\"jump\") || 0;\n    if (time > 60 + Jump) {\n        start = time - Jump;\n        msg.payload = start\n        stop = time - 60 - Jump;\n        msg.topic = \"SELECT * FROM `nhietdodoam`.`doantotnghiep\"+Room+\"` where `STT` >=\" + stop + \" and `STT` <= \" + start + \" ;\"   \n        return msg;\n    }\n    if (time <= 60) {\n        start = time\n        stop = 1\n        msg.payload = start\n        msg.topic = \"SELECT * FROM `nhietdodoam`.`doantotnghiep\"+Room+\"` where `STT` >=\" + stop + \" and `STT` <= \" + start + \" ;\"   \n        return msg;\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1460,
        "wires": [
            [
                "d5cddaff28df0951"
            ]
        ]
    },
    {
        "id": "361b19baed48fc44",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 7",
        "func": "var Jump = flow.get(\"jump\")||0;\nvar timepic = flow.get(\"timepic\")||0;\nvar time = flow.get(\"timehold\")||0;\nif (msg.payload == \"+\" && (Jump + timepic) < time)\n{\n    Jump += timepic;\n}\nif(msg.payload == \"-\" && Jump >= timepic)\n{\n    Jump -= timepic;\n}\nflow.set(\"jump\",Jump)\nmsg.payload = Jump;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "bb56c6170c3e53b1",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "group": "3c5da821.6d5638",
        "order": 14,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Reset",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 370,
        "y": 1820,
        "wires": [
            [
                "1e86604ab2b61ec6"
            ]
        ]
    },
    {
        "id": "b01aecdf62829af9",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "group": "3c5da821.6d5638",
        "order": 8,
        "width": 23,
        "height": 8,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "SSS",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1150,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "db34c81277bc3b91",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 8",
        "func": "var data1 = [];\nvar data2 = []; //flow.get(\"table\")||[];\nvar data3 = [];\nvar data4 = [];\nvar humi1 = 0;\nvar humi2 = 0;\nvar humi3 = 0;\nvar humi4 = 0;\nvar TS = \"\";\nfor (var i = 0; i < msg.payload.length; i++) {\n    humi1 = msg.payload[i].DA1\n    humi2 = msg.payload[i].DA2\n    humi3 = msg.payload[i].DA3\n    humi4 = msg.payload[i].DA4\n    TS = msg.payload[i].Atime\n    data1.push(\n        {\n            \"x\": i,\n            \"y\": humi1\n        }\n    )\n    data2.push(\n        {\n            \"x\": i,\n            \"y\": humi2\n        }\n    )\n    data3.push(\n        {\n            \"x\": i,\n            \"y\": humi3\n        }\n    )\n    data4.push(\n        {\n            \"x\": i,\n            \"y\": humi4\n        }\n    )\n\n}\n\nmsg.payload = [{\n    \"series\": [\"Độ ẩm 1\",\"Dộ ẩm 2\",\"Độ ẩm 3\",\"Độ ẩm 4\"],\n    \"data\": [data1,data2,data3,data4],\n    \"labels\": []\n}];\nmsg.topic = \"Data set 1\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1480,
        "wires": [
            [
                "b01aecdf62829af9"
            ]
        ]
    },
    {
        "id": "ae555b5ca42a9bb5",
        "type": "change",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 1460,
        "wires": [
            [
                "0c7bf62d7d5cb7a8"
            ]
        ]
    },
    {
        "id": "f8825d1762473e0f",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "events": "all",
        "x": 320,
        "y": 1460,
        "wires": [
            [
                "ae555b5ca42a9bb5"
            ]
        ]
    },
    {
        "id": "2682802a1550246c",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1450,
        "y": 540,
        "wires": [
            [
                "ce7b5b4a0d036ef1"
            ]
        ]
    },
    {
        "id": "497e5a2c32140ce3",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1610,
        "y": 540,
        "wires": [
            [
                "4545fe350be94aa5",
                "d27c8d048b1e3d69",
                "12f82f5089b89a86",
                "81cf401ca8bef268",
                "ea0706e62dca91c0",
                "6395b0865161c315"
            ]
        ]
    },
    {
        "id": "4545fe350be94aa5",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 500,
        "wires": [
            [
                "6b991fcb1dcbd597"
            ],
            [
                "7651fa6fdc4e42dd"
            ],
            [
                "056a66a5f936e805"
            ],
            [
                "7d3e3157452e5b74"
            ]
        ]
    },
    {
        "id": "d27c8d048b1e3d69",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1750,
        "y": 580,
        "wires": [
            [
                "fee5f0535b199e71"
            ],
            [
                "c20488fb44a265c3"
            ],
            [
                "daab0b690228ba5b"
            ],
            [
                "116fc5fcb1bf9255"
            ]
        ]
    },
    {
        "id": "12f82f5089b89a86",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nvar msg1={};\nvar msg2={};\nvar msg3={};\nvar msg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp11\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp21\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp31\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp41\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 500,
        "wires": [
            [
                "d614f6868aa2d493"
            ],
            [
                "d614f6868aa2d493"
            ],
            [
                "d614f6868aa2d493"
            ],
            [
                "d614f6868aa2d493"
            ]
        ]
    },
    {
        "id": "81cf401ca8bef268",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi11\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi21\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi31\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi41\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 580,
        "wires": [
            [
                "5de4a048c44f9b4c"
            ],
            [
                "5de4a048c44f9b4c"
            ],
            [
                "5de4a048c44f9b4c"
            ],
            [
                "5de4a048c44f9b4c"
            ]
        ]
    },
    {
        "id": "ea0706e62dca91c0",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1980,
        "y": 360,
        "wires": [
            [
                "451414a9753c94b1"
            ]
        ]
    },
    {
        "id": "6b991fcb1dcbd597",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 400,
        "wires": []
    },
    {
        "id": "7651fa6fdc4e42dd",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 440,
        "wires": []
    },
    {
        "id": "056a66a5f936e805",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 480,
        "wires": []
    },
    {
        "id": "7d3e3157452e5b74",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 520,
        "wires": []
    },
    {
        "id": "fee5f0535b199e71",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 560,
        "wires": []
    },
    {
        "id": "c20488fb44a265c3",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 600,
        "wires": []
    },
    {
        "id": "daab0b690228ba5b",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 640,
        "wires": []
    },
    {
        "id": "116fc5fcb1bf9255",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 680,
        "wires": []
    },
    {
        "id": "d614f6868aa2d493",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 2320,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "5de4a048c44f9b4c",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "e4734e2bb53e42d6",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 2310,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "451414a9753c94b1",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "e4734e2bb53e42d6",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 2330,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "3d124aa54f3a7a8c",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1620,
        "y": 500,
        "wires": []
    },
    {
        "id": "6395b0865161c315",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if (Room == 1) {\n        flow.set(\"GiaTriCanThiet\", msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\nreturn msg;\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1990,
        "y": 280,
        "wires": [
            [
                "bb0f0c8f0befdd86"
            ],
            [
                "c8009663084a1e26"
            ],
            [
                "b0b496446f56abd3",
                "33cc393e3f4cd2e1"
            ],
            [
                "e02614e2d13231cc"
            ]
        ]
    },
    {
        "id": "bb0f0c8f0befdd86",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "dda5df23deffdb64",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1690,
        "y": 360,
        "wires": []
    },
    {
        "id": "e02614e2d13231cc",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "dda5df23deffdb64",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1690,
        "y": 320,
        "wires": []
    },
    {
        "id": "33cc393e3f4cd2e1",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "dda5df23deffdb64",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1690,
        "y": 280,
        "wires": []
    },
    {
        "id": "0a2ea93f1f7c922c",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "dda5df23deffdb64",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1680,
        "y": 240,
        "wires": []
    },
    {
        "id": "33ca58347fa56dca",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "group": "dda5df23deffdb64",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1670,
        "y": 200,
        "wires": []
    },
    {
        "id": "c8009663084a1e26",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "dda5df23deffdb64",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 1690,
        "y": 400,
        "wires": []
    },
    {
        "id": "cf67d99667f1f3eb",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2590,
        "y": 540,
        "wires": [
            [
                "9c78c6ca093ba3a4"
            ]
        ]
    },
    {
        "id": "c21f918542e73adb",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2750,
        "y": 540,
        "wires": [
            [
                "80f6ecc673d9596f",
                "ca432c321b4057c6",
                "bb6b6da22a9df3f8",
                "45545a6e7ee15640",
                "0f291887819649f7",
                "e710075acbffce60"
            ]
        ]
    },
    {
        "id": "80f6ecc673d9596f",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 500,
        "wires": [
            [
                "437f3bf7f8095998"
            ],
            [
                "0f3b38ede2dabf0d"
            ],
            [
                "c46da8203c19c0b9"
            ],
            [
                "b62db736f4432be5"
            ]
        ]
    },
    {
        "id": "ca432c321b4057c6",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2890,
        "y": 580,
        "wires": [
            [
                "1f79c27234deb4ec"
            ],
            [
                "4a6ff0add244edad"
            ],
            [
                "9be9784f5926e16a"
            ],
            [
                "1e53db31aedba0a1"
            ]
        ]
    },
    {
        "id": "bb6b6da22a9df3f8",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nvar msg1={};\nvar msg2={};\nvar msg3={};\nvar msg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp12\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp22\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp32\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp42\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3260,
        "y": 500,
        "wires": [
            [
                "1a81d9f15ea12057"
            ],
            [
                "1a81d9f15ea12057"
            ],
            [
                "1a81d9f15ea12057"
            ],
            [
                "1a81d9f15ea12057"
            ]
        ]
    },
    {
        "id": "45545a6e7ee15640",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi12\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi22\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi32\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi42\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3250,
        "y": 580,
        "wires": [
            [
                "b3c3bbc547d4619c"
            ],
            [
                "b3c3bbc547d4619c"
            ],
            [
                "b3c3bbc547d4619c"
            ],
            [
                "b3c3bbc547d4619c"
            ]
        ]
    },
    {
        "id": "0f291887819649f7",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3120,
        "y": 360,
        "wires": [
            [
                "2f6a68d8a796e86a"
            ]
        ]
    },
    {
        "id": "437f3bf7f8095998",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 400,
        "wires": []
    },
    {
        "id": "0f3b38ede2dabf0d",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 440,
        "wires": []
    },
    {
        "id": "c46da8203c19c0b9",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 480,
        "wires": []
    },
    {
        "id": "b62db736f4432be5",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 520,
        "wires": []
    },
    {
        "id": "1f79c27234deb4ec",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 560,
        "wires": []
    },
    {
        "id": "4a6ff0add244edad",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 600,
        "wires": []
    },
    {
        "id": "9be9784f5926e16a",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 640,
        "wires": []
    },
    {
        "id": "1e53db31aedba0a1",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 680,
        "wires": []
    },
    {
        "id": "1a81d9f15ea12057",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 3460,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "b3c3bbc547d4619c",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "4bca7f56df3cd0c4",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 3450,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "2f6a68d8a796e86a",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "4bca7f56df3cd0c4",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 3470,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "32dc0fca27183206",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2760,
        "y": 500,
        "wires": []
    },
    {
        "id": "e710075acbffce60",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if (Room == 2) {\n        flow.set(\"GiaTriCanThiet\", msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\nreturn msg;\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3130,
        "y": 280,
        "wires": [
            [
                "fc3cd02ae7fc1ddc"
            ],
            [
                "481b91e4d62059d8"
            ],
            [
                "2b79159ac9961915",
                "f38b600fd402e195"
            ],
            [
                "3e55a1a06d9d2a0c"
            ]
        ]
    },
    {
        "id": "481b91e4d62059d8",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "fe73659136b81ff9",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 2830,
        "y": 400,
        "wires": []
    },
    {
        "id": "09c4c4d7ca128f9b",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "fe73659136b81ff9",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 2810,
        "y": 240,
        "wires": []
    },
    {
        "id": "9c53dce39cb75dd9",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "group": "fe73659136b81ff9",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 2820,
        "y": 200,
        "wires": []
    },
    {
        "id": "f38b600fd402e195",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "fe73659136b81ff9",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 2830,
        "y": 280,
        "wires": []
    },
    {
        "id": "3e55a1a06d9d2a0c",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "fe73659136b81ff9",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 2830,
        "y": 320,
        "wires": []
    },
    {
        "id": "fc3cd02ae7fc1ddc",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "fe73659136b81ff9",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 2830,
        "y": 360,
        "wires": []
    },
    {
        "id": "977c3058a87d834e",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 310,
        "y": 1160,
        "wires": [
            [
                "eb2a0fa4d56e6a46"
            ]
        ]
    },
    {
        "id": "31fe82edd6325a2b",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 470,
        "y": 1160,
        "wires": [
            [
                "35712211924edf49",
                "d97da3d2470e7b03",
                "15fa8c2d8f6b5491",
                "d6f4a3511d992b51",
                "10266d9f30b72ce3",
                "576f4f92f58b65ef"
            ]
        ]
    },
    {
        "id": "35712211924edf49",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1120,
        "wires": [
            [
                "1b8102e6cf577c17"
            ],
            [
                "63a6160a9bf221ac"
            ],
            [
                "d3c827da689d3dc7"
            ],
            [
                "dd16fa9c26b01cbe"
            ]
        ]
    },
    {
        "id": "d97da3d2470e7b03",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1200,
        "wires": [
            [
                "682625a234d20c1a"
            ],
            [
                "70ea981f573b879b"
            ],
            [
                "3f5490a35ea058fa"
            ],
            [
                "cbd50c920edb8639"
            ]
        ]
    },
    {
        "id": "15fa8c2d8f6b5491",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nvar msg1={};\nvar msg2={};\nvar msg3={};\nvar msg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp13\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp23\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp33\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp43\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 1120,
        "wires": [
            [
                "64b1a55efd371320"
            ],
            [
                "64b1a55efd371320"
            ],
            [
                "64b1a55efd371320"
            ],
            [
                "64b1a55efd371320"
            ]
        ]
    },
    {
        "id": "d6f4a3511d992b51",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi13\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi23\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi33\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi43\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1200,
        "wires": [
            [
                "7fc7dcc89047c2f1"
            ],
            [
                "7fc7dcc89047c2f1"
            ],
            [
                "7fc7dcc89047c2f1"
            ],
            [
                "7fc7dcc89047c2f1"
            ]
        ]
    },
    {
        "id": "10266d9f30b72ce3",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 980,
        "wires": [
            [
                "b7c23accf25bc5a4"
            ]
        ]
    },
    {
        "id": "1b8102e6cf577c17",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 1020,
        "wires": []
    },
    {
        "id": "63a6160a9bf221ac",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 1060,
        "wires": []
    },
    {
        "id": "d3c827da689d3dc7",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 1100,
        "wires": []
    },
    {
        "id": "dd16fa9c26b01cbe",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 1140,
        "wires": []
    },
    {
        "id": "682625a234d20c1a",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 1180,
        "wires": []
    },
    {
        "id": "70ea981f573b879b",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 1220,
        "wires": []
    },
    {
        "id": "3f5490a35ea058fa",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 1260,
        "wires": []
    },
    {
        "id": "cbd50c920edb8639",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 1300,
        "wires": []
    },
    {
        "id": "64b1a55efd371320",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1180,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "7fc7dcc89047c2f1",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "0dd1703808ec3391",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1170,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "b7c23accf25bc5a4",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "0dd1703808ec3391",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1190,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "3b8a8d05aa3f846e",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 1120,
        "wires": []
    },
    {
        "id": "576f4f92f58b65ef",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if (Room == 3) {\n        flow.set(\"GiaTriCanThiet\", msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\nreturn msg;\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 900,
        "wires": [
            [
                "9f73510f16681e3e"
            ],
            [
                "0754a53682ea3381"
            ],
            [
                "4c58bc0ce32dad15",
                "c782c5bcd9b28755"
            ],
            [
                "fed289a7ec6fb6a4"
            ]
        ]
    },
    {
        "id": "0754a53682ea3381",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "b603a047890100d2",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 550,
        "y": 1020,
        "wires": []
    },
    {
        "id": "7b1a052c78649436",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "b603a047890100d2",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 530,
        "y": 860,
        "wires": []
    },
    {
        "id": "78224bef95847bb3",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "group": "b603a047890100d2",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 540,
        "y": 820,
        "wires": []
    },
    {
        "id": "c782c5bcd9b28755",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "b603a047890100d2",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 550,
        "y": 900,
        "wires": []
    },
    {
        "id": "fed289a7ec6fb6a4",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "b603a047890100d2",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 550,
        "y": 940,
        "wires": []
    },
    {
        "id": "9f73510f16681e3e",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "b603a047890100d2",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 550,
        "y": 980,
        "wires": []
    },
    {
        "id": "b1cb741da97dec16",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1450,
        "y": 1160,
        "wires": [
            [
                "0b55248e5bed14fb"
            ]
        ]
    },
    {
        "id": "aea1a5feb2e1dc69",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1610,
        "y": 1160,
        "wires": [
            [
                "6b1485f7b438bf20",
                "8b360d47bf444aea",
                "5e1c46b73f4ed257",
                "8c066fedcf2c149e",
                "db7c412f19c1929d",
                "84da74c22f6d641e"
            ]
        ]
    },
    {
        "id": "6b1485f7b438bf20",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 1120,
        "wires": [
            [
                "74d181caab69034a"
            ],
            [
                "49230089016f5f8f"
            ],
            [
                "6cbc18dc815612db"
            ],
            [
                "56ed3c40b48df477"
            ]
        ]
    },
    {
        "id": "8b360d47bf444aea",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1750,
        "y": 1200,
        "wires": [
            [
                "4056ef2fad8021c3"
            ],
            [
                "fd4eb110e7e4aee6"
            ],
            [
                "c160b96974606005"
            ],
            [
                "0706141b1925d02f"
            ]
        ]
    },
    {
        "id": "5e1c46b73f4ed257",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nvar msg1={};\nvar msg2={};\nvar msg3={};\nvar msg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp14\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp24\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp34\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp44\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 1120,
        "wires": [
            [
                "e8ee5657bca6da03"
            ],
            [
                "e8ee5657bca6da03"
            ],
            [
                "e8ee5657bca6da03"
            ],
            [
                "e8ee5657bca6da03"
            ]
        ]
    },
    {
        "id": "8c066fedcf2c149e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi14\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi24\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi34\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi44\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 1200,
        "wires": [
            [
                "0481ad4b6c9ff52a"
            ],
            [
                "0481ad4b6c9ff52a"
            ],
            [
                "0481ad4b6c9ff52a"
            ],
            [
                "0481ad4b6c9ff52a"
            ]
        ]
    },
    {
        "id": "db7c412f19c1929d",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1980,
        "y": 980,
        "wires": [
            [
                "3e492832d09d5a11"
            ]
        ]
    },
    {
        "id": "74d181caab69034a",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 1020,
        "wires": []
    },
    {
        "id": "49230089016f5f8f",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6cbc18dc815612db",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 1100,
        "wires": []
    },
    {
        "id": "56ed3c40b48df477",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1950,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4056ef2fad8021c3",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 1180,
        "wires": []
    },
    {
        "id": "fd4eb110e7e4aee6",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 1220,
        "wires": []
    },
    {
        "id": "c160b96974606005",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 1260,
        "wires": []
    },
    {
        "id": "0706141b1925d02f",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1960,
        "y": 1300,
        "wires": []
    },
    {
        "id": "e8ee5657bca6da03",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 2320,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "0481ad4b6c9ff52a",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "dce5d194594a7518",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 2310,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "3e492832d09d5a11",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "dce5d194594a7518",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 2330,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "1ec1bae4351f8108",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1620,
        "y": 1120,
        "wires": []
    },
    {
        "id": "84da74c22f6d641e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if (Room == 4) {\n        flow.set(\"GiaTriCanThiet\", msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\nreturn msg;\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1990,
        "y": 900,
        "wires": [
            [
                "dbba90490675f878"
            ],
            [
                "4e128b0f05d315ef"
            ],
            [
                "0f5b8b59aad205c9",
                "66ea59a90b7ceec4"
            ],
            [
                "4c4fd6adbabc655e"
            ]
        ]
    },
    {
        "id": "4e128b0f05d315ef",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "77912f4d36e6d77f",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 1690,
        "y": 1020,
        "wires": []
    },
    {
        "id": "34e22a1590e2d4bf",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "77912f4d36e6d77f",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1670,
        "y": 860,
        "wires": []
    },
    {
        "id": "b06f0da1a2ba51e4",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "group": "77912f4d36e6d77f",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1680,
        "y": 820,
        "wires": []
    },
    {
        "id": "0f5b8b59aad205c9",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "77912f4d36e6d77f",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1690,
        "y": 900,
        "wires": []
    },
    {
        "id": "4c4fd6adbabc655e",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "77912f4d36e6d77f",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1690,
        "y": 940,
        "wires": []
    },
    {
        "id": "dbba90490675f878",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "77912f4d36e6d77f",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1690,
        "y": 980,
        "wires": []
    },
    {
        "id": "b0b496446f56abd3",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "function 12",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp11\") || 0;\n    var h = flow.get(\"Humi11\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp21\") || 0;\n    var h = flow.get(\"Humi21\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp31\") || 0;\n    var h = flow.get(\"Humi31\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp41\") || 0;\n    var h = flow.get(\"Humi41\") || 0;\n}\nelse \n{\n    t=0\n    h=0\n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 220,
        "wires": [
            [
                "0a2ea93f1f7c922c"
            ],
            [
                "33ca58347fa56dca"
            ]
        ]
    },
    {
        "id": "2b79159ac9961915",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "function 13",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp12\") || 0;\n    var h = flow.get(\"Humi12\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp22\") || 0;\n    var h = flow.get(\"Humi22\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp32\") || 0;\n    var h = flow.get(\"Humi32\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp42\") || 0;\n    var h = flow.get(\"Humi42\") || 0;\n}\nelse \n{\n    t=0\n    h=0\n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 220,
        "wires": [
            [
                "9c53dce39cb75dd9"
            ],
            [
                "09c4c4d7ca128f9b"
            ]
        ]
    },
    {
        "id": "4c58bc0ce32dad15",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "function 14",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp13\") || 0;\n    var h = flow.get(\"Humi13\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp23\") || 0;\n    var h = flow.get(\"Humi23\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp33\") || 0;\n    var h = flow.get(\"Humi33\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp43\") || 0;\n    var h = flow.get(\"Humi43\") || 0;\n}\nelse\n{\n    t=0\n    h=0\n    \n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 840,
        "wires": [
            [
                "78224bef95847bb3"
            ],
            [
                "7b1a052c78649436"
            ]
        ]
    },
    {
        "id": "66ea59a90b7ceec4",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "function 15",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp14\") || 0;\n    var h = flow.get(\"Humi14\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp24\") || 0;\n    var h = flow.get(\"Humi24\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp34\") || 0;\n    var h = flow.get(\"Humi34\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp44\") || 0;\n    var h = flow.get(\"Humi44\") || 0;\n}\nelse\n{\n    t=0\n    h=0\n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 840,
        "wires": [
            [
                "b06f0da1a2ba51e4"
            ],
            [
                "34e22a1590e2d4bf"
            ]
        ]
    },
    {
        "id": "da2c14ddd1db3f68",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2590,
        "y": 1160,
        "wires": [
            [
                "4c8c555529b9d60d"
            ]
        ]
    },
    {
        "id": "e2b09619d51fb020",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2750,
        "y": 1160,
        "wires": [
            [
                "8bfbd5ae54b9389e",
                "09189b391dcf5835",
                "7a1c229072ee0ffb",
                "8eeadd24560d261a",
                "bdd3477a23a326f4",
                "e4a8395ec69957be"
            ]
        ]
    },
    {
        "id": "8bfbd5ae54b9389e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 1120,
        "wires": [
            [
                "b298c2f355ef0cc0"
            ],
            [
                "4b264ff9937e1ac1"
            ],
            [
                "8f347e7d133a5edb"
            ],
            [
                "6818c4f0ad0ef526"
            ]
        ]
    },
    {
        "id": "09189b391dcf5835",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2890,
        "y": 1200,
        "wires": [
            [
                "6954c0ea5cb7396d"
            ],
            [
                "fe994000f562a3df"
            ],
            [
                "7b4371ea4f3bbb8f"
            ],
            [
                "8e1f70fc8f93a5c9"
            ]
        ]
    },
    {
        "id": "7a1c229072ee0ffb",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nvar msg1={};\nvar msg2={};\nvar msg3={};\nvar msg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp15\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp25\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp35\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp45\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3260,
        "y": 1120,
        "wires": [
            [
                "35534769ccb1ac0c"
            ],
            [
                "35534769ccb1ac0c"
            ],
            [
                "35534769ccb1ac0c"
            ],
            [
                "35534769ccb1ac0c"
            ]
        ]
    },
    {
        "id": "8eeadd24560d261a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi15\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi25\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi35\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi45\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3250,
        "y": 1200,
        "wires": [
            [
                "57824d699d3fd09d"
            ],
            [
                "57824d699d3fd09d"
            ],
            [
                "57824d699d3fd09d"
            ],
            [
                "57824d699d3fd09d"
            ]
        ]
    },
    {
        "id": "bdd3477a23a326f4",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3120,
        "y": 980,
        "wires": [
            [
                "5546c3c1e656492f"
            ]
        ]
    },
    {
        "id": "b298c2f355ef0cc0",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 1020,
        "wires": []
    },
    {
        "id": "4b264ff9937e1ac1",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 1060,
        "wires": []
    },
    {
        "id": "8f347e7d133a5edb",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 1100,
        "wires": []
    },
    {
        "id": "6818c4f0ad0ef526",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3090,
        "y": 1140,
        "wires": []
    },
    {
        "id": "6954c0ea5cb7396d",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 1180,
        "wires": []
    },
    {
        "id": "fe994000f562a3df",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 1220,
        "wires": []
    },
    {
        "id": "7b4371ea4f3bbb8f",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 1260,
        "wires": []
    },
    {
        "id": "8e1f70fc8f93a5c9",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 3100,
        "y": 1300,
        "wires": []
    },
    {
        "id": "35534769ccb1ac0c",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 3460,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "57824d699d3fd09d",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "abe235dbadb8cb6e",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 3450,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "5546c3c1e656492f",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "abe235dbadb8cb6e",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 3470,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "400d60942f902032",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2760,
        "y": 1120,
        "wires": []
    },
    {
        "id": "e4a8395ec69957be",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if (Room == 5) {\n        flow.set(\"GiaTriCanThiet\", msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\nreturn msg;\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3130,
        "y": 900,
        "wires": [
            [
                "c4c628c491b91e4d"
            ],
            [
                "fc93473c419f1a7a"
            ],
            [
                "988f7a13d5b119e4",
                "c7676f2724cc3271"
            ],
            [
                "ff451b3c8b325df6"
            ]
        ]
    },
    {
        "id": "fc93473c419f1a7a",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "cbe45a2573a74db6",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 2830,
        "y": 1020,
        "wires": []
    },
    {
        "id": "19157b50d212866a",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "cbe45a2573a74db6",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 2810,
        "y": 860,
        "wires": []
    },
    {
        "id": "208e7cd963e26545",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "group": "cbe45a2573a74db6",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 2820,
        "y": 820,
        "wires": []
    },
    {
        "id": "988f7a13d5b119e4",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "cbe45a2573a74db6",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 2830,
        "y": 900,
        "wires": []
    },
    {
        "id": "ff451b3c8b325df6",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "cbe45a2573a74db6",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 2830,
        "y": 940,
        "wires": []
    },
    {
        "id": "c4c628c491b91e4d",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "cbe45a2573a74db6",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 2830,
        "y": 980,
        "wires": []
    },
    {
        "id": "c7676f2724cc3271",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "function 16",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp15\") || 0;\n    var h = flow.get(\"Humi15\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp25\") || 0;\n    var h = flow.get(\"Humi25\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp35\") || 0;\n    var h = flow.get(\"Humi35\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp45\") || 0;\n    var h = flow.get(\"Humi45\") || 0;\n}\nelse\n{\n    t=0\n    h=0\n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2650,
        "y": 840,
        "wires": [
            [
                "208e7cd963e26545"
            ],
            [
                "19157b50d212866a"
            ]
        ]
    },
    {
        "id": "d882e26bde46d056",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "to SQL2",
        "func": "var i = flow.get(\"time1\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp11\") || 0;\nvar temp2 = flow.get(\"Temp21\") || 0;\nvar temp3 = flow.get(\"Temp31\") || 0;\nvar temp4 = flow.get(\"Temp41\") || 0;\nvar humi1 = flow.get(\"Humi11\") || 0;\nvar humi2 = flow.get(\"Humi21\") || 0;\nvar humi3 = flow.get(\"Humi31\") || 0;\nvar humi4 = flow.get(\"Humi41\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep1` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time1\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1580,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "b64f89f4280574ef",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "order": 1,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Room",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 690,
        "y": 1500,
        "wires": []
    },
    {
        "id": "bd127eb68165e31a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 17",
        "func": "var x = flow.get(\"Room\")||0\nx = x+1\nmsg.payload = x\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1500,
        "wires": [
            [
                "b64f89f4280574ef",
                "7df0e6be664f9dbc"
            ]
        ]
    },
    {
        "id": "87c151b202e16940",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "to SQL3",
        "func": "var i = flow.get(\"time2\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp12\") || 0;\nvar temp2 = flow.get(\"Temp22\") || 0;\nvar temp3 = flow.get(\"Temp32\") || 0;\nvar temp4 = flow.get(\"Temp42\") || 0;\nvar humi1 = flow.get(\"Humi12\") || 0;\nvar humi2 = flow.get(\"Humi22\") || 0;\nvar humi3 = flow.get(\"Humi32\") || 0;\nvar humi4 = flow.get(\"Humi42\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep2` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time2\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1620,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "7ca06a650b5bb776",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "to SQL4",
        "func": "var i = flow.get(\"time3\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp13\") || 0;\nvar temp2 = flow.get(\"Temp23\") || 0;\nvar temp3 = flow.get(\"Temp33\") || 0;\nvar temp4 = flow.get(\"Temp43\") || 0;\nvar humi1 = flow.get(\"Humi13\") || 0;\nvar humi2 = flow.get(\"Humi23\") || 0;\nvar humi3 = flow.get(\"Humi33\") || 0;\nvar humi4 = flow.get(\"Humi43\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep3` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time3\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1660,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "fe2614e0f5358ebd",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "to SQL5",
        "func": "var i = flow.get(\"time4\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp14\") || 0;\nvar temp2 = flow.get(\"Temp24\") || 0;\nvar temp3 = flow.get(\"Temp34\") || 0;\nvar temp4 = flow.get(\"Temp44\") || 0;\nvar humi1 = flow.get(\"Humi14\") || 0;\nvar humi2 = flow.get(\"Humi24\") || 0;\nvar humi3 = flow.get(\"Humi34\") || 0;\nvar humi4 = flow.get(\"Humi44\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep4` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time4\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1700,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "926012ee5f626d7a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "to SQL6",
        "func": "var i = flow.get(\"time5\")\nif (i==undefined)\n{\n    i=1\n}\nvar temp1 = flow.get(\"Temp15\") || 0;\nvar temp2 = flow.get(\"Temp25\") || 0;\nvar temp3 = flow.get(\"Temp35\") || 0;\nvar temp4 = flow.get(\"Temp45\") || 0;\nvar humi1 = flow.get(\"Humi15\") || 0;\nvar humi2 = flow.get(\"Humi25\") || 0;\nvar humi3 = flow.get(\"Humi35\") || 0;\nvar humi4 = flow.get(\"Humi45\") || 0;\nmsg.payload = [i,temp1,temp2,temp3,temp4,humi1,humi2,humi3,humi4]\n//msg.payload = [i,2,3,4,5,6,7,8,9]\nmsg.topic = \"INSERT INTO `nhietdodoam`.`doantotnghiep5` (`STT`, `ND1`, `ND2`, `ND3`, `ND4`, `DA1`, `DA2`, `DA3`, `DA4`) VALUES (?,?,?,?,?,?,?,?,?);\"\ni = i + 1\nflow.set(\"time5\", i)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1740,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "fbb50dae352ed154",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 1860,
        "wires": [
            [
                "31944e134334543e"
            ]
        ]
    },
    {
        "id": "31944e134334543e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "delete all SQL",
        "func": "msg.topic = \"DELETE FROM `nhietdodoam`.`doantotnghiep0`;\"\nmsg.topic += \"DELETE FROM `nhietdodoam`.`doantotnghiep1`;\"\nmsg.topic += \"DELETE FROM `nhietdodoam`.`doantotnghiep2`;\"\nmsg.topic += \"DELETE FROM `nhietdodoam`.`doantotnghiep3`;\"\nmsg.topic += \"DELETE FROM `nhietdodoam`.`doantotnghiep4`;\"\nmsg.topic += \"DELETE FROM `nhietdodoam`.`doantotnghiep5`;\"\nflow.set(\"time0\", 1);\nflow.set(\"time1\", 1);\nflow.set(\"time2\", 1);\nflow.set(\"time3\", 1);\nflow.set(\"time4\", 1);\nflow.set(\"time5\", 1);\nflow.set(\"jump\", 0)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1860,
        "wires": [
            [
                "4ab5aa7515e20a3b"
            ]
        ]
    },
    {
        "id": "ce7b5b4a0d036ef1",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "function 20",
        "func": "var x = flow.get(\"Topic1\")||0\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n//    msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n//    return [msg1, msg2];\n    return msg2;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 600,
        "wires": [
            [
                "497e5a2c32140ce3"
            ]
        ]
    },
    {
        "id": "9c78c6ca093ba3a4",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "function 22",
        "func": "var x = flow.get(\"Topic2\")||0\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n    // msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    // return [msg1, msg2];\n    return msg2;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 600,
        "wires": [
            [
                "c21f918542e73adb"
            ]
        ]
    },
    {
        "id": "eb2a0fa4d56e6a46",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "function 24",
        "func": "var x = flow.get(\"Topic3\")||0\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n    // msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    // return [msg1, msg2];\n    return msg2;\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1220,
        "wires": [
            [
                "31fe82edd6325a2b"
            ],
            [
                "31fe82edd6325a2b"
            ]
        ]
    },
    {
        "id": "0b55248e5bed14fb",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "function 26",
        "func": "var x = flow.get(\"Topic4\")||0\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n    // msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    // return [msg1, msg2];\n    return msg2;\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 1220,
        "wires": [
            [
                "aea1a5feb2e1dc69"
            ],
            [
                "aea1a5feb2e1dc69"
            ]
        ]
    },
    {
        "id": "4c8c555529b9d60d",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "function 28",
        "func": "var x = flow.get(\"Topic5\")||0\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n    // msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    // return [msg1, msg2];\n    return msg2;\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 1220,
        "wires": [
            [
                "e2b09619d51fb020"
            ],
            [
                "e2b09619d51fb020"
            ]
        ]
    },
    {
        "id": "ea045d18de83af16",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 310,
        "y": 540,
        "wires": [
            [
                "2ad3a25722458273"
            ]
        ]
    },
    {
        "id": "dbe1c606af473d6b",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 470,
        "y": 540,
        "wires": [
            [
                "aeb293f70c104947",
                "3815e1813461c7b0",
                "a2c14984fa7c2dfb",
                "83e7695f02acac2d",
                "4e9c706c8c130405",
                "d5e63f2e37a3449c"
            ]
        ]
    },
    {
        "id": "aeb293f70c104947",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "nhiệt độ",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var temp1 = msg.payload.temp1;\n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    var temp4 = msg.payload.temp4;\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 500,
        "wires": [
            [
                "960966b9ebd2c459"
            ],
            [
                "974a592bc36eba52"
            ],
            [
                "3b8f07a12b30458e"
            ],
            [
                "387b8cee1b853dfe"
            ]
        ]
    },
    {
        "id": "3815e1813461c7b0",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "độ ẩm",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 580,
        "wires": [
            [
                "59fc35eb42990ec8"
            ],
            [
                "880fa42946450f9a"
            ],
            [
                "49aaa1a524913e88"
            ],
            [
                "8db8ef7dfbda6ce4"
            ]
        ]
    },
    {
        "id": "a2c14984fa7c2dfb",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "nhiệt độ Chart",
        "func": "if (msg.payload.x == 1) {\nmsg1={};\nmsg2={};\nmsg3={};\nmsg4={};\nvar temp1 = msg.payload.temp1;\nvar temp2 = msg.payload.temp2;\nvar temp3 = msg.payload.temp3;\nvar temp4 = msg.payload.temp4;\nmsg1.payload = temp1;\nmsg2.payload = temp2;\nmsg3.payload = temp3;\nmsg4.payload = temp4;\nmsg1.topic = \"Temp1\"\nflow.set(\"Temp1\",temp1)\nmsg2.topic = \"Temp2\"\nflow.set(\"Temp2\",temp2)\nmsg3.topic = \"Temp3\"\nflow.set(\"Temp3\",temp3)\nmsg4.topic = \"Temp4\"\nflow.set(\"Temp4\",temp4)\nreturn [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 500,
        "wires": [
            [
                "031205f9558e00a4"
            ],
            [
                "031205f9558e00a4"
            ],
            [
                "031205f9558e00a4"
            ],
            [
                "031205f9558e00a4"
            ]
        ]
    },
    {
        "id": "83e7695f02acac2d",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "độ ẩm Chart",
        "func": "if (msg.payload.x == 1) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var humi1 = msg.payload.humi1;\n    var humi2 = msg.payload.humi2;\n    var humi3 = msg.payload.humi3;\n    var humi4 = msg.payload.humi4;\n    msg1.payload = humi1;\n    msg2.payload = humi2;\n    msg3.payload = humi3;\n    msg4.payload = humi4;\n    msg1.topic = \"Humi1\"\n    flow.set(\"Humi1\", humi1)\n    msg2.topic = \"Humi2\"\n    flow.set(\"Humi2\", humi2)\n    msg3.topic = \"Humi3\"\n    flow.set(\"Humi3\", humi3)\n    msg4.topic = \"Humi4\"\n    flow.set(\"Humi4\", humi4)\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 580,
        "wires": [
            [
                "b6aab81c5435a684"
            ],
            [
                "b6aab81c5435a684"
            ],
            [
                "b6aab81c5435a684"
            ],
            [
                "b6aab81c5435a684"
            ]
        ]
    },
    {
        "id": "4e9c706c8c130405",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "Đưa thông số lên bảng",
        "func": "if (msg.payload.x == 1) {\nvar arr = [\n    {\n       \"Vị trí\": \"1\",\n        \"Nhiệt độ\": msg.payload.temp1,\n        \"Độ ẩm\" : msg.payload.humi1 \n    },\n    {\n        \"Vị trí\": \"2\",\n        \"Nhiệt độ\": msg.payload.temp2,\n        \"Độ ẩm\": msg.payload.humi2\n    },\n    {\n        \"Vị trí\": \"3\",\n        \"Nhiệt độ\": msg.payload.temp3,\n        \"Độ ẩm\": msg.payload.humi3\n    },\n    {\n        \"Vị trí\": \"4\",\n        \"Nhiệt độ\": msg.payload.temp4,\n        \"Độ ẩm\": msg.payload.humi4\n    }\n] \nmsg.payload = arr;\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 360,
        "wires": [
            [
                "ba3898a44b146461"
            ]
        ]
    },
    {
        "id": "960966b9ebd2c459",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 7,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 1",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 400,
        "wires": []
    },
    {
        "id": "974a592bc36eba52",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 8,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 2",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 440,
        "wires": []
    },
    {
        "id": "3b8f07a12b30458e",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 3",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 480,
        "wires": []
    },
    {
        "id": "387b8cee1b853dfe",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Nhiệt độ 4",
        "label": "",
        "format": "{{value}}℃",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 810,
        "y": 520,
        "wires": []
    },
    {
        "id": "59fc35eb42990ec8",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 1",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 560,
        "wires": []
    },
    {
        "id": "880fa42946450f9a",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 2",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 600,
        "wires": []
    },
    {
        "id": "49aaa1a524913e88",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 5,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 3",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 640,
        "wires": []
    },
    {
        "id": "8db8ef7dfbda6ce4",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 6,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Độ ẩm 4",
        "label": "%RH",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 820,
        "y": 680,
        "wires": []
    },
    {
        "id": "031205f9558e00a4",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 3,
        "width": 7,
        "height": 6,
        "label": "Nhiệt độ",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1180,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "b6aab81c5435a684",
        "type": "ui_chart",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "e1facfe5b6fb4be1",
        "order": 4,
        "width": 7,
        "height": 6,
        "label": "Độ ẩm",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "cubic",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1170,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "ba3898a44b146461",
        "type": "ui_template",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "e1facfe5b6fb4be1",
        "name": "Bảng hiển thị",
        "order": 9,
        "width": 14,
        "height": 5,
        "format": "<table id=\"table\" border=\"1\">\n    <tr>\n        <th>Vị trí</th>\n        <th>Nhiệt độ</th>\n        <th>Độ ẩm</th>\n    </tr>\n    <tbody style=\"text-align:center\">\n        <tr ng-repeat=\"row in msg.payload\">\n            <td ng-repeat=\"item in row\">{{item}}</td>\n        </tr>\n    </tbody>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1190,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "d5e63f2e37a3449c",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    \n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    var Room = flow.get(\"Room\")\n    if(Room==0)\n    {\n        flow.set(\"GiaTriCanThiet\",msg.payload.temp2)\n        flow.set(\"ViTri\", msg.payload.temp3)\n        flow.set(\"DK\", msg.payload.temp1)\n        flow.set(\"TIME\", msg.payload.humi1)\n        flow.set(\"MIN\", msg.payload.humi2)\n    }\n    return [msg1, msg2, msg3, msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 280,
        "wires": [
            [
                "25782877a4d6c659"
            ],
            [
                "083f9e7a8a63b004"
            ],
            [
                "069b7b2389d29bdd",
                "a32f28ef2cb7335a"
            ],
            [
                "7535e422dc81e383"
            ]
        ]
    },
    {
        "id": "25782877a4d6c659",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "ac5a544713325796",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 610,
        "y": 360,
        "wires": []
    },
    {
        "id": "7535e422dc81e383",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "ac5a544713325796",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 610,
        "y": 320,
        "wires": []
    },
    {
        "id": "069b7b2389d29bdd",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "ac5a544713325796",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 610,
        "y": 240,
        "wires": []
    },
    {
        "id": "4738ae40c62bee6d",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "ac5a544713325796",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Nhiệt độ",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "150",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 600,
        "y": 160,
        "wires": []
    },
    {
        "id": "4142af6f095c1911",
        "type": "ui_gauge",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "group": "ac5a544713325796",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "gage",
        "title": "Độ ẩm",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 590,
        "y": 200,
        "wires": []
    },
    {
        "id": "083f9e7a8a63b004",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "ac5a544713325796",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài:",
        "format": "{{msg.payload}}℃",
        "layout": "row-spread",
        "x": 610,
        "y": 280,
        "wires": []
    },
    {
        "id": "a32f28ef2cb7335a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "function 11",
        "func": "var msg1 = {};\nvar msg2 = {};\nif(msg.payload == 1)\n{\n    var t = flow.get(\"Temp1\") || 0;\n    var h = flow.get(\"Humi1\") || 0;\n}\nelse if (msg.payload == 2) {\n    var t = flow.get(\"Temp2\") || 0;\n    var h = flow.get(\"Humi2\") || 0;\n}\nelse if (msg.payload == 3) {\n    var t = flow.get(\"Temp3\") || 0;\n    var h = flow.get(\"Humi3\") || 0;\n}\nelse if (msg.payload == 4) {\n    var t = flow.get(\"Temp4\") || 0;\n    var h = flow.get(\"Humi4\") || 0;\n}\nelse if (msg.payload == 0)\n{\n    t = 0\n    h = 0\n}\nmsg1.payload = t\nmsg2.payload = h\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 180,
        "wires": [
            [
                "4738ae40c62bee6d"
            ],
            [
                "4142af6f095c1911"
            ]
        ]
    },
    {
        "id": "2ad3a25722458273",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "function 19",
        "func": "var x = flow.get(\"Topic0\")||0\nif (msg.topic==\"Room\"+x)\n{\n    return msg;\n}\nelse\n{\n    var msg1 = {}\n    var msg2 = {}\n//    msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":1,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    return msg2;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 600,
        "wires": [
            [
                "dbe1c606af473d6b"
            ]
        ]
    },
    {
        "id": "90553c0e33abada7",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "events": "all",
        "x": 1900,
        "y": 160,
        "wires": [
            [
                "0863567d97c7b2d4"
            ]
        ]
    },
    {
        "id": "0863567d97c7b2d4",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "function 32",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 2;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2050,
        "y": 160,
        "wires": [
            [
                "d0da189bb3ad7b55"
            ]
        ]
    },
    {
        "id": "d0da189bb3ad7b55",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 2210,
        "y": 160,
        "wires": [
            [
                "cb537d2b32482a6d"
            ]
        ]
    },
    {
        "id": "cb537d2b32482a6d",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "function 34",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic1\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2370,
        "y": 160,
        "wires": [
            [
                "8a538087a77a549d"
            ]
        ]
    },
    {
        "id": "4b41e29ec958532d",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "events": "all",
        "x": 3040,
        "y": 160,
        "wires": [
            [
                "d31d07fda60f46fd"
            ]
        ]
    },
    {
        "id": "d31d07fda60f46fd",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "function 35",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 3;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3190,
        "y": 160,
        "wires": [
            [
                "900577792fc616dd"
            ]
        ]
    },
    {
        "id": "900577792fc616dd",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 3350,
        "y": 160,
        "wires": [
            [
                "629b6e3ef310469b"
            ]
        ]
    },
    {
        "id": "629b6e3ef310469b",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "function 37",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic2\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3510,
        "y": 160,
        "wires": [
            [
                "09f5b6efead2b8f8"
            ]
        ]
    },
    {
        "id": "5c18117dc2e07b60",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "events": "all",
        "x": 760,
        "y": 780,
        "wires": [
            [
                "edd2de5bc6554f13"
            ]
        ]
    },
    {
        "id": "edd2de5bc6554f13",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "function 38",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 4;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 780,
        "wires": [
            [
                "b823ad600681868a"
            ]
        ]
    },
    {
        "id": "b823ad600681868a",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 1070,
        "y": 780,
        "wires": [
            [
                "6a1e4b38953d5b5d"
            ]
        ]
    },
    {
        "id": "6a1e4b38953d5b5d",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "function 40",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic3\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 780,
        "wires": [
            [
                "c80bb091197a614c"
            ]
        ]
    },
    {
        "id": "7270830ad5375b80",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "events": "all",
        "x": 1900,
        "y": 780,
        "wires": [
            [
                "070d2c397f697f38"
            ]
        ]
    },
    {
        "id": "070d2c397f697f38",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "function 41",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 5;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2050,
        "y": 780,
        "wires": [
            [
                "0c850937f17be76f"
            ]
        ]
    },
    {
        "id": "0c850937f17be76f",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 2210,
        "y": 780,
        "wires": [
            [
                "61f0d8197af544dd"
            ]
        ]
    },
    {
        "id": "61f0d8197af544dd",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "function 43",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic4\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2370,
        "y": 780,
        "wires": [
            [
                "fc26cc661b28be3f"
            ]
        ]
    },
    {
        "id": "b2ec86fdd86bf11e",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "events": "all",
        "x": 3040,
        "y": 780,
        "wires": [
            [
                "d2cefa2b350a36f3"
            ]
        ]
    },
    {
        "id": "d2cefa2b350a36f3",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "function 44",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 6;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3190,
        "y": 780,
        "wires": [
            [
                "e460eee5fccd8e5b"
            ]
        ]
    },
    {
        "id": "e460eee5fccd8e5b",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 3350,
        "y": 780,
        "wires": [
            [
                "9a602a33d754e50a"
            ]
        ]
    },
    {
        "id": "9a602a33d754e50a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "function 46",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic5\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3510,
        "y": 780,
        "wires": [
            [
                "1b43dfe9ef26d635"
            ]
        ]
    },
    {
        "id": "8a538087a77a549d",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "group": "dda5df23deffdb64",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 2390,
        "y": 200,
        "wires": []
    },
    {
        "id": "09f5b6efead2b8f8",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "group": "fe73659136b81ff9",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 3530,
        "y": 200,
        "wires": []
    },
    {
        "id": "c80bb091197a614c",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "group": "b603a047890100d2",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1250,
        "y": 820,
        "wires": []
    },
    {
        "id": "fc26cc661b28be3f",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "group": "77912f4d36e6d77f",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 2390,
        "y": 820,
        "wires": []
    },
    {
        "id": "1b43dfe9ef26d635",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "group": "cbe45a2573a74db6",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 3530,
        "y": 820,
        "wires": []
    },
    {
        "id": "7db9333f5c9ff737",
        "type": "mqtt out",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e5d4ff983813d9d0",
        "x": 1850,
        "y": 1620,
        "wires": []
    },
    {
        "id": "4d53414835fbffc7",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var T1 = flow.get(\"Temp1\")||[];\nvar T2 = flow.get(\"Temp2\")||[];\nvar T3 = flow.get(\"Temp3\")||[];\nvar T4 = flow.get(\"Temp4\")||[];\nvar H1 = flow.get(\"Humi1\")||[];\nvar H2 = flow.get(\"Humi2\")||[];\nvar H3 = flow.get(\"Humi3\")||[];\nvar H4 = flow.get(\"Humi4\")||[];\nmsg.payload = [\n    {\n        \"Vị trí\" : 1,\n        \"Nhiệt độ\" : T1,\n        \"Độ ẩm\" : H1,\n    },\n    {\n        \"Vị trí\" : 2,\n        \"Nhiệt độ\" : T2,\n        \"Độ ẩm\" : H2,\n    },\n    {\n        \"Vị trí\" : 3,\n        \"Nhiệt độ\" : T3,\n        \"Độ ẩm\" : H3,\n    },\n    {\n        \"Vị trí\" : 4,\n        \"Nhiệt độ\" : T4,\n        \"Độ ẩm\" : H4,\n    },\n    ];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "6b0e6310e12d1d57",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1490,
        "y": 1500,
        "wires": [
            [
                "4d53414835fbffc7"
            ]
        ]
    },
    {
        "id": "11c34486b25b9edc",
        "type": "ui_dropdown",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "label": "Vị trí",
        "tooltip": "",
        "place": "Select option",
        "group": "757bf0949f4ff47c",
        "order": 4,
        "width": 9,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Vị trí 1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Vị trí 2",
                "value": 2,
                "type": "num"
            },
            {
                "label": "Vị trí 3",
                "value": 3,
                "type": "num"
            },
            {
                "label": "Vị trí 4",
                "value": 4,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1670,
        "y": 1540,
        "wires": [
            [
                "258ea240fcf9e0f6"
            ]
        ]
    },
    {
        "id": "21511a18635f25be",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "group": "757bf0949f4ff47c",
        "order": 10,
        "width": 9,
        "height": 1,
        "passthru": false,
        "label": "Nhập",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "date",
        "topic": "topic",
        "topicType": "msg",
        "x": 1490,
        "y": 1620,
        "wires": [
            [
                "f987cc04d0c9c2b7",
                "16d6dc6814cc4d9b"
            ]
        ]
    },
    {
        "id": "88d32ec039eb2153",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var x = msg.payload;\nflow.set(\"GiaTriCanThiet1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "258ea240fcf9e0f6",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "Vị trí",
        "func": "var x = msg.payload\nflow.set(\"ViTri1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2050,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "9222407eede9351c",
        "type": "ui_dropdown",
        "z": "913a9fc678d69bed",
        "d": true,
        "g": "349d337beae3dc76",
        "name": "",
        "label": "Phân loại",
        "tooltip": "",
        "place": "Select option",
        "group": "31f14418.dc50dc",
        "order": 7,
        "width": 9,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Nhiệt độ",
                "value": "T",
                "type": "str"
            },
            {
                "label": "Độ ẩm",
                "value": "H",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1680,
        "y": 1580,
        "wires": [
            [
                "f71d480bfb00a68b"
            ]
        ]
    },
    {
        "id": "f71d480bfb00a68b",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "Phân loại",
        "func": "var x = msg.payload\nflow.set(\"PhanLoai1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "f987cc04d0c9c2b7",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var CS = flow.get(\"Countsend\")||0\nif (CS>=5)\n{var GT = flow.get(\"GiaTriCanThiet1\") || 0;\nvar VT = flow.get(\"ViTri1\") || 0;\nvar DK = flow.get(\"DK1\") || 0;\nvar Room = flow.get(\"Room\")||0;\nvar H = flow.get(\"TIME1\") || 0;\nvar M = flow.get(\"MIN1\") || 0;\nvar x = flow.get(\"Topic\"+Room)\nmsg.topic = \"TRoom\"+x\nmsg.payload = \n    {\n        \"W\": 1,\n        \"VT\": VT,\n        \"DK\": DK,\n        \"GT\": GT,\n        \"H\": H,\n        \"M\": M\n    };\n    flow.set(\"Countsend\",0)\nreturn msg;}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 1620,
        "wires": [
            [
                "7db9333f5c9ff737",
                "1b04c3c018fb59a5"
            ]
        ]
    },
    {
        "id": "a9be00faf8ed196a",
        "type": "ui_text_input",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "TempSetup",
        "label": "Cài đặt nhiệt độ",
        "tooltip": "",
        "group": "757bf0949f4ff47c",
        "order": 5,
        "width": 9,
        "height": 1,
        "passthru": true,
        "mode": "number",
        "delay": "0",
        "topic": "topic",
        "topicType": "msg",
        "x": 1870,
        "y": 1540,
        "wires": [
            [
                "88d32ec039eb2153"
            ]
        ]
    },
    {
        "id": "84be8cb8dc75ac3f",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2000,
        "y": 1680,
        "wires": []
    },
    {
        "id": "1b04c3c018fb59a5",
        "type": "json",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1850,
        "y": 1680,
        "wires": [
            [
                "84be8cb8dc75ac3f"
            ]
        ]
    },
    {
        "id": "70d5a7269abdac8c",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1480,
        "y": 1660,
        "wires": [
            [
                "f987cc04d0c9c2b7",
                "16d6dc6814cc4d9b"
            ]
        ]
    },
    {
        "id": "574eb80b90bbb0b0",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 1870,
        "y": 1720,
        "wires": [
            []
        ]
    },
    {
        "id": "16d6dc6814cc4d9b",
        "type": "function",
        "z": "913a9fc678d69bed",
        "d": true,
        "g": "349d337beae3dc76",
        "name": "function 9",
        "func": "var GT = flow.get(\"GiaTriCanThiet\") || [];\nvar VT = flow.get(\"ViTri\") || [];\nvar PL = flow.get(\"PhanLoai\") || [];\nmsg.topic = \"DELETE FROM `nhietdodoam`.`status`;\"\nmsg.topic +=\"INSERT INTO `nhietdodoam`.`status` (`ST`, `ND`, `TG`, `CQ`) VALUES (?,?,?,?);\"\nmsg.payload = [3,4,31,4]\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 1720,
        "wires": [
            [
                "574eb80b90bbb0b0"
            ]
        ]
    },
    {
        "id": "abc103af3bc95e17",
        "type": "ui_dropdown",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "label": "Điều khiển",
        "tooltip": "",
        "place": "Select option",
        "group": "757bf0949f4ff47c",
        "order": 3,
        "width": 9,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Chạy",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Dừng",
                "value": 0,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1870,
        "y": 1500,
        "wires": [
            [
                "8e7436ce8cf6b954"
            ]
        ]
    },
    {
        "id": "8e7436ce8cf6b954",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var x = msg.payload;\nflow.set(\"DK1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "57f373191f3b740c",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "lấy dữ liệu trạng thái hoạt động",
        "func": "if (msg.payload.x==2)\n{\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var msg5 = {};\n    var msg6 = {};\n    if (msg.payload.temp1==1)\n    { var temp1 = \"Start\"}\n    else if (msg.payload.temp1 == 0) \n    { var temp1 = \"Stop\"} \n    var temp2 = msg.payload.temp2;\n    var temp3 = msg.payload.temp3;\n    if (msg.payload.temp4 == 1) { var temp4 = \"Start\" }\n    else if (msg.payload.temp4 == 0) { var temp4 = \"Stop\" }\n    msg1.payload = temp1;\n    msg2.payload = temp2;\n    msg3.payload = temp3;\n    msg4.payload = temp4;\n    msg5.payload = msg.payload.humi1 + \"h : \" + msg.payload.humi2+\"p\";\n    return [msg1, msg2, msg3, msg4,msg5];\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2040,
        "wires": [
            [
                "571aeaa5fde20a34"
            ],
            [
                "404727fb01a75279"
            ],
            [
                "728d656be8f4a8b3"
            ],
            [
                "3338a734c67f1d83"
            ],
            [
                "744245e33ee44757"
            ]
        ]
    },
    {
        "id": "571aeaa5fde20a34",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 3,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Trạng thái hoạt động:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1120,
        "y": 2000,
        "wires": []
    },
    {
        "id": "404727fb01a75279",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 6,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Nhiệt độ cài đặt:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1100,
        "y": 2040,
        "wires": []
    },
    {
        "id": "728d656be8f4a8b3",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 5,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Cảm biến:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1090,
        "y": 2080,
        "wires": []
    },
    {
        "id": "3338a734c67f1d83",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 4,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Cấp nhiệt:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "row-spread",
        "x": 1090,
        "y": 2120,
        "wires": []
    },
    {
        "id": "ea8fada9eab42d95",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 2040,
        "wires": [
            [
                "605577ad33cda9e2"
            ]
        ]
    },
    {
        "id": "605577ad33cda9e2",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "function 56",
        "func": "var Room = flow.get(\"Room\") || 0;\nvar x = flow.get(\"Topic\" + Room)\nif (msg.topic==\"Room\"+x)\n{return msg;}\nelse {\n    var msg1 = {}\n    var msg2 = {}\n    msg1.payload = '{\"x\":1,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    msg2.payload = '{\"x\":2,\"temp1\":0,\"temp2\":0,\"temp3\":0,\"temp4\":0,\"humi1\":0,\"humi2\":0,\"humi3\":0,\"humi4\":0}'\n    return [msg1, msg2];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 2040,
        "wires": [
            [
                "d67e601d4c2dc0be"
            ],
            [
                "d67e601d4c2dc0be"
            ]
        ]
    },
    {
        "id": "d67e601d4c2dc0be",
        "type": "json",
        "z": "913a9fc678d69bed",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 610,
        "y": 2040,
        "wires": [
            [
                "57f373191f3b740c",
                "f28205586c65e496"
            ]
        ]
    },
    {
        "id": "e95b44a0fc499d0f",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 320,
        "y": 2000,
        "wires": [
            [
                "605577ad33cda9e2"
            ]
        ]
    },
    {
        "id": "9b981effbc1bc388",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 600,
        "y": 2200,
        "wires": [
            [
                "ea2a337513d9220b"
            ]
        ]
    },
    {
        "id": "ea2a337513d9220b",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "function 57",
        "func": "var Room = flow.get(\"Room\") || 0;\nRoom+=1\nmsg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= \"+Room+\";\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 2200,
        "wires": [
            [
                "ae779469b4475001"
            ]
        ]
    },
    {
        "id": "b5b2b5741299f57a",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 910,
        "y": 2240,
        "wires": [
            [
                "ea2a337513d9220b"
            ]
        ]
    },
    {
        "id": "ae779469b4475001",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 910,
        "y": 2200,
        "wires": [
            [
                "ae3e404f563ea648"
            ]
        ]
    },
    {
        "id": "2a73b921588869ba",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "function 58",
        "func": "var Room = flow.get(\"Room\") || 0;\nflow.set(\"Topic\"+Room,msg.payload)\nRoom += 1\nvar x = msg.payload\nmsg.topic = \"DELETE FROM `nhietdodoam`.`room` WHERE (`Room` = '\"+Room+\"');\"\nmsg.topic += \"INSERT INTO `nhietdodoam`.`room` (`Room`, `Connect`) VALUES (?,?);\"\nmsg.payload = [Room,x]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 2240,
        "wires": [
            [
                "b5b2b5741299f57a"
            ]
        ]
    },
    {
        "id": "ae3e404f563ea648",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "function 59",
        "func": "var x = msg.payload[0].Connect\nvar Room = flow.get(\"Room\") || 0;\nvar y = flow.get(\"Topic\" + Room)\nif(x==0||x==undefined)\n{msg.payload=0}\nelse\n{msg.payload = x}\nflow.set(\"Topic\" + Room,x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 2200,
        "wires": [
            [
                "024ab4c81da9a1b3",
                "0758341319e6ab5b"
            ]
        ]
    },
    {
        "id": "0758341319e6ab5b",
        "type": "ui_text_input",
        "z": "913a9fc678d69bed",
        "name": "",
        "label": "ID",
        "tooltip": "",
        "group": "326a98d64cc222b3",
        "order": 2,
        "width": 5,
        "height": 1,
        "passthru": true,
        "mode": "number",
        "delay": "0",
        "topic": "topic",
        "topicType": "msg",
        "x": 590,
        "y": 2240,
        "wires": [
            [
                "2a73b921588869ba"
            ]
        ]
    },
    {
        "id": "024ab4c81da9a1b3",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 1,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "ID",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1090,
        "y": 2240,
        "wires": []
    },
    {
        "id": "d52a88527ea4b2a5",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2340,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "ae7ecf508d93275a",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "SHOWHIDEROOM",
        "func": "var msg1 = {}\nvar msg2 = {}\nvar x = msg.payload\nif (x==0)\n{\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room1\"], \"hide\": [\"Room_Room2\", \"Room_Room3\", \"Room_Room4\", \"Room_Room5\", \"Room_Room6\"] } }\n}\nelse if (x==1)\n{\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room2\"], \"hide\": [\"Room_Room1\", \"Room_Room3\", \"Room_Room4\", \"Room_Room5\", \"Room_Room6\"] } }\n}\nelse if (x == 2) \n{\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room3\"], \"hide\": [\"Room_Room1\", \"Room_Room2\", \"Room_Room4\", \"Room_Room5\", \"Room_Room6\"] } }\n}\nelse if (x == 3) \n{\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room4\"], \"hide\": [\"Room_Room1\", \"Room_Room2\", \"Room_Room3\", \"Room_Room5\", \"Room_Room6\"] } }\n}\nelse if (x == 4) {\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room5\"], \"hide\": [\"Room_Room1\", \"Room_Room2\", \"Room_Room3\", \"Room_Room4\", \"Room_Room6\"] } }\n}\nelse if (x == 5) {\n    msg1.payload = { \"group\": { \"show\": [\"Room_Room6\"], \"hide\": [\"Room_Room1\", \"Room_Room2\", \"Room_Room3\", \"Room_Room4\", \"Room_Room5\"] } }\n}\nmsg2.payload = 1\nflow.set(\"Room\",x)\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 2460,
        "wires": [
            [
                "b1f3e158bd4d8f97"
            ],
            [
                "b1f3e158bd4d8f97"
            ]
        ]
    },
    {
        "id": "fba4107139b42070",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 2,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2380,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "e79d5d9e45a19fe1",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 3,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2420,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "97b81a04bd45ece4",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 4,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 4",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2460,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "7560749e0982d41a",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 5,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 5",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2500,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "ee4ef9736f165d6e",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "f0851a8e318128ed",
        "order": 6,
        "width": 3,
        "height": 2,
        "passthru": false,
        "label": "Phòng sấy 6",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "5",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2540,
        "wires": [
            [
                "ae7ecf508d93275a"
            ]
        ]
    },
    {
        "id": "b1f3e158bd4d8f97",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 1060,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "430fac2a167c55a5",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "First connect",
        "func": "msg.payload = { \"group\": { \"show\": [\"Room_Room1\"], \"hide\": [\"Room_Room2\", \"Room_Room3\", \"Room_Room4\", \"Room_Room5\", \"Room_Room6\"] } }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 2420,
        "wires": [
            [
                "b1f3e158bd4d8f97"
            ]
        ]
    },
    {
        "id": "01cb6cd57bdb70fd",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "connect",
        "x": 640,
        "y": 2300,
        "wires": [
            [
                "430fac2a167c55a5"
            ]
        ]
    },
    {
        "id": "36c613f35f6fa75b",
        "type": "debug",
        "z": "913a9fc678d69bed",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2300,
        "wires": []
    },
    {
        "id": "7df0e6be664f9dbc",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "757bf0949f4ff47c",
        "order": 1,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Room",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 690,
        "y": 1540,
        "wires": []
    },
    {
        "id": "a17d8dd10c527e16",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "function 60",
        "func": "var x = msg.payload[0].Connect\nif (x == 0 || x == undefined) { msg.payload = 0 }\nelse { msg.payload = x }\nflow.set(\"Topic0\",x)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 160,
        "wires": [
            [
                "5e113d4eb2c4758f"
            ]
        ]
    },
    {
        "id": "b390f4e28e9a67ba",
        "type": "mysql",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "mydb": "b69fe292e89f2d1a",
        "name": "",
        "x": 1070,
        "y": 160,
        "wires": [
            [
                "a17d8dd10c527e16"
            ]
        ]
    },
    {
        "id": "5e113d4eb2c4758f",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "group": "ac5a544713325796",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "ID:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1250,
        "y": 200,
        "wires": []
    },
    {
        "id": "2a6de21db04b7c81",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "function 61",
        "func": "msg.topic = \"SELECT * FROM `nhietdodoam`.`room` where `Room`= 1;\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 160,
        "wires": [
            [
                "b390f4e28e9a67ba"
            ]
        ]
    },
    {
        "id": "d0985a683e9183d7",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "events": "all",
        "x": 760,
        "y": 160,
        "wires": [
            [
                "2a6de21db04b7c81"
            ]
        ]
    },
    {
        "id": "dde468aee7c8e01c",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "events": "all",
        "x": 1480,
        "y": 1440,
        "wires": [
            [
                "88a37e06df70f6a1"
            ]
        ]
    },
    {
        "id": "88a37e06df70f6a1",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "function 62",
        "func": "var msg1 = {}\nvar msg2 = {}\nvar msg3 = {}\nvar msg4 = {}\nvar msg5 = {}\nvar GT = flow.get(\"GiaTriCanThiet\");\nvar VT = flow.get(\"ViTri\");\nvar DK = flow.get(\"DK\")\nvar H = flow.get(\"TIME\");\nvar M = flow.get(\"MIN\")\nmsg1.payload = DK\nmsg2.payload = VT\nmsg3.payload = GT\nmsg4.payload = H\nmsg5.payload = M\nreturn [msg1, msg2, msg3, msg4, msg5];",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1670,
        "y": 1440,
        "wires": [
            [
                "abc103af3bc95e17"
            ],
            [
                "11c34486b25b9edc"
            ],
            [
                "a9be00faf8ed196a"
            ],
            [
                "ab652dddb63be93c"
            ],
            [
                "e326263fed8979a1"
            ]
        ]
    },
    {
        "id": "ab652dddb63be93c",
        "type": "ui_text_input",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "label": "Giờ",
        "tooltip": "",
        "group": "757bf0949f4ff47c",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "number",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 1510,
        "y": 1780,
        "wires": [
            [
                "9eaf0dcb8859b44f"
            ]
        ]
    },
    {
        "id": "9eaf0dcb8859b44f",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var x = msg.payload;\nflow.set(\"TIME1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "1c4d024f51dfe253",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var x = msg.payload;\nflow.set(\"MIN1\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2040,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "e326263fed8979a1",
        "type": "ui_text_input",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "label": "Phút",
        "tooltip": "",
        "group": "757bf0949f4ff47c",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "number",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 1910,
        "y": 1780,
        "wires": [
            [
                "1c4d024f51dfe253"
            ]
        ]
    },
    {
        "id": "744245e33ee44757",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "group": "326a98d64cc222b3",
        "order": 7,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Thời gian cài:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1280,
        "y": 2140,
        "wires": []
    },
    {
        "id": "eed75d263eb5f67e",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "name": "function 63",
        "func": "var msg1={}\nvar msg2={}\nmsg1.payload =  msg.payload[0].Atime\nmsg2.payload = msg.payload[msg.payload.length-1].Atime\nreturn [msg1,msg2];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 1520,
        "wires": [
            [
                "b46d164480d90e89",
                "d62abcf87230a694"
            ],
            [
                "b8fab216f8efc460",
                "2fc401566f9fda86"
            ]
        ]
    },
    {
        "id": "b46d164480d90e89",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1170,
        "y": 1520,
        "wires": []
    },
    {
        "id": "b8fab216f8efc460",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "order": 7,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "x": 1170,
        "y": 1600,
        "wires": []
    },
    {
        "id": "d62abcf87230a694",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "order": 9,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1170,
        "y": 1560,
        "wires": []
    },
    {
        "id": "2fc401566f9fda86",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "30e1365ebf8cb310",
        "group": "3c5da821.6d5638",
        "order": 11,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "x": 1170,
        "y": 1640,
        "wires": []
    },
    {
        "id": "2d48daeab623d664",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c7f4757000a6a2a2",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Lịch sử",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "2",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2580,
        "wires": [
            [
                "802023716ea14ef0"
            ]
        ]
    },
    {
        "id": "d994377c5ca56956",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c7f4757000a6a2a2",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Trang chủ",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2660,
        "wires": [
            [
                "802023716ea14ef0"
            ]
        ]
    },
    {
        "id": "95797668bef8c360",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c7f4757000a6a2a2",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Cài Đặt",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "3",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2620,
        "wires": [
            [
                "802023716ea14ef0"
            ]
        ]
    },
    {
        "id": "802023716ea14ef0",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 840,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "bb79178bde35b36e",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "d1cc5f4707dc49d4",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Room",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 630,
        "y": 2720,
        "wires": [
            [
                "8b6e52f0d665a713"
            ]
        ]
    },
    {
        "id": "51dd57b9be8a4207",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "d1cc5f4707dc49d4",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Trang chủ",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2800,
        "wires": [
            [
                "8b6e52f0d665a713"
            ]
        ]
    },
    {
        "id": "4589a8b23b52ea04",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "d1cc5f4707dc49d4",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Cài Đặt",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "3",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2760,
        "wires": [
            [
                "8b6e52f0d665a713"
            ]
        ]
    },
    {
        "id": "8b6e52f0d665a713",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 840,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "f2aee09641d7949f",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c82b5368cc0324ed",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Lịch sử",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "2",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2860,
        "wires": [
            [
                "efb8703edf8317ac"
            ]
        ]
    },
    {
        "id": "b24d69e94ed0d28d",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c82b5368cc0324ed",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Trang chủ",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 2940,
        "wires": [
            [
                "efb8703edf8317ac"
            ]
        ]
    },
    {
        "id": "82fe65f7b814a71e",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "name": "",
        "group": "c82b5368cc0324ed",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Room",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 630,
        "y": 2900,
        "wires": [
            [
                "efb8703edf8317ac"
            ]
        ]
    },
    {
        "id": "efb8703edf8317ac",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "name": "",
        "events": "all",
        "x": 840,
        "y": 2880,
        "wires": [
            []
        ]
    },
    {
        "id": "6d2df0dc0c11e020",
        "type": "mqtt out",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e5d4ff983813d9d0",
        "x": 1830,
        "y": 2000,
        "wires": []
    },
    {
        "id": "6d6c36cd3b5a94a1",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "func": "var CS = flow.get(\"Countsend\") || 0\nif (CS >= 3) {\n    var Room = flow.get(\"Room\") || 0;\n    var x = flow.get(\"Topic\" + Room)\n    var op = msg.payload\n    msg.topic = \"TRoom\" + x\n    msg.payload =\n    {\n        \"W\": 2,\n        \"op\": op,\n        \"DK\": 0,\n        \"GT\": 0,\n        \"H\": 0,\n        \"M\": 0\n    };\n    flow.set(\"Countsend\", 0)\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 2000,
        "wires": [
            [
                "6d2df0dc0c11e020"
            ]
        ]
    },
    {
        "id": "fd928ac93466a1b8",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "group": "e0e5648d9ce3eea5",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Xả ẩm",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1490,
        "y": 1960,
        "wires": [
            [
                "6d6c36cd3b5a94a1"
            ]
        ]
    },
    {
        "id": "b0d5e912e85823b9",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "group": "e0e5648d9ce3eea5",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Quạt TH",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1500,
        "y": 2000,
        "wires": [
            [
                "6d6c36cd3b5a94a1"
            ]
        ]
    },
    {
        "id": "eca6d0c835bf7ff6",
        "type": "ui_button",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "group": "e0e5648d9ce3eea5",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Cấp ẩm",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1500,
        "y": 2040,
        "wires": [
            [
                "6d6c36cd3b5a94a1"
            ]
        ]
    },
    {
        "id": "93b4ba9cfc12a7d1",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "group": "e0e5648d9ce3eea5",
        "order": 4,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "OP1:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "col-center",
        "x": 2030,
        "y": 1820,
        "wires": []
    },
    {
        "id": "d86418815e7fceeb",
        "type": "mqtt in",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "json",
        "broker": "e5d4ff983813d9d0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1490,
        "y": 1820,
        "wires": [
            [
                "2d065e4332f7a340"
            ]
        ]
    },
    {
        "id": "ab284f08fac87082",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "function 64",
        "func": "if (msg.payload.x == 5) {\n    var room = flow.get(\"Room\") || 0\n    var x = flow.get(\"Topic\" + room) || 0\n    var msg1 = {};\n    var msg2 = {}\n    var msg3 = {}\n    var msg4 = {}\n    var msg5 = {}\n    if (msg.topic == \"Room\" + x) {\n        var op1 = msg.payload.op1;\n        var op2 = msg.payload.op2;\n        var op3 = msg.payload.op3;\n        var h = msg.payload.h;\n        var p = msg.payload.p;\n        if (op1 == 1) { msg1.payload = \"Start\" }\n        else if (op1 == 0) { msg1.payload = \"Stop\" }\n        if (op2 == 1) { msg2.payload = \"Start\" }\n        else if (op2 == 0) { msg2.payload = \"Stop\" }\n        if (op3 == 1) { msg3.payload = \"Start\" }\n        else if (op3 == 0) { msg3.payload = \"Stop\" }\n        msg4.payload = h+\"h : \"+p+\"p\" \n    }\n    return [msg1,msg2,msg3,msg4];\n}",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1830,
        "y": 1840,
        "wires": [
            [
                "93b4ba9cfc12a7d1"
            ],
            [
                "5a355769f3e9365c"
            ],
            [
                "4f379782c241ca6e"
            ],
            [
                "5cfa8b95e1c39c37"
            ]
        ]
    },
    {
        "id": "5a355769f3e9365c",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "group": "e0e5648d9ce3eea5",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "OP2:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "col-center",
        "x": 2030,
        "y": 1860,
        "wires": []
    },
    {
        "id": "4f379782c241ca6e",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "group": "e0e5648d9ce3eea5",
        "order": 6,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "OP3:",
        "format": "<font color={{msg.payload}} ><i class=\"fa fa-circle\" style=\"font-size:24px;\"></i></font>",
        "layout": "col-center",
        "x": 2030,
        "y": 1900,
        "wires": []
    },
    {
        "id": "ebba30f8804649c1",
        "type": "inject",
        "z": "913a9fc678d69bed",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1510,
        "y": 2140,
        "wires": [
            [
                "7a51faad5a2d91a5"
            ]
        ]
    },
    {
        "id": "7a51faad5a2d91a5",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "thời gian delay gửi tín hiệu",
        "func": "var x = flow.get(\"Countsend\")||0;\nx = x + 1\nflow.set(\"Countsend\",x);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "f28205586c65e496",
        "type": "function",
        "z": "913a9fc678d69bed",
        "name": "function 66",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "5cfa8b95e1c39c37",
        "type": "ui_text",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "group": "326a98d64cc222b3",
        "order": 8,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Thời gian chạy:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 2060,
        "y": 1940,
        "wires": []
    },
    {
        "id": "2d065e4332f7a340",
        "type": "function",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "function 67",
        "func": "var Room = flow.get(\"Room\") || 0;\nvar x = flow.get(\"Topic\" + Room)\nif (msg.topic == \"Room\" + x) { return msg; }\nelse {\n    var msg1 = {}\n    msg1.topic = \"Room\" + x\n    msg1.payload = {\n        x: 5,\n        op1: 0,\n        op2: 0,\n        op3: 0,\n        h: 0,\n        p: 0\n    }\n    return msg1;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1650,
        "y": 1840,
        "wires": [
            [
                "ab284f08fac87082"
            ]
        ]
    },
    {
        "id": "aabf7e885616dad4",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "349d337beae3dc76",
        "name": "",
        "events": "all",
        "x": 1500,
        "y": 1880,
        "wires": [
            [
                "2d065e4332f7a340"
            ]
        ]
    },
    {
        "id": "b54e94eb38af3e89",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "03b8df6aada9f510",
        "name": "",
        "events": "all",
        "x": 340,
        "y": 1300,
        "wires": [
            [
                "eb2a0fa4d56e6a46"
            ]
        ]
    },
    {
        "id": "7ff1187ab2a6085a",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "86570ca980073f6e",
        "name": "",
        "events": "all",
        "x": 1480,
        "y": 1300,
        "wires": [
            [
                "0b55248e5bed14fb"
            ]
        ]
    },
    {
        "id": "3738b37ad9b5c494",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "c3f2bd801acbf604",
        "name": "",
        "events": "all",
        "x": 2600,
        "y": 1280,
        "wires": [
            [
                "4c8c555529b9d60d"
            ]
        ]
    },
    {
        "id": "3647b6c2cd04d111",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "34d649120bb9f575",
        "name": "",
        "events": "all",
        "x": 2620,
        "y": 660,
        "wires": [
            [
                "9c78c6ca093ba3a4"
            ]
        ]
    },
    {
        "id": "d3e793e7ed477bbd",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "09dc50047470ab58",
        "name": "",
        "events": "all",
        "x": 1460,
        "y": 680,
        "wires": [
            [
                "ce7b5b4a0d036ef1"
            ]
        ]
    },
    {
        "id": "37d0d5aa131c5ae8",
        "type": "ui_ui_control",
        "z": "913a9fc678d69bed",
        "g": "60e6c56c14748795",
        "name": "",
        "events": "all",
        "x": 320,
        "y": 660,
        "wires": [
            [
                "2ad3a25722458273"
            ]
        ]
    },
    {
        "id": "6ed349b34e44829d",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 2,
        "width": 18,
        "height": 1
    },
    {
        "id": "8021601accd6ac9f",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 6,
        "width": 11,
        "height": 1
    },
    {
        "id": "4c57db306ae9e63b",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 10,
        "width": 11,
        "height": 1
    },
    {
        "id": "a36adf634e36c575",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "1c0e579ed0692502",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 16,
        "width": 1,
        "height": 1
    },
    {
        "id": "23ddeb5a4120e097",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "3c5da821.6d5638",
        "order": 19,
        "width": 1,
        "height": 1
    },
    {
        "id": "b7bb7cb04230dbc5",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "d1cc5f4707dc49d4",
        "order": 1,
        "width": 3,
        "height": 1
    },
    {
        "id": "3d4698f8c07765a7",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "d1cc5f4707dc49d4",
        "order": 5,
        "width": 2,
        "height": 1
    },
    {
        "id": "a17e1b5a11f361e2",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "e1facfe5b6fb4be1",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "90cedc5128ac7533",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "e4734e2bb53e42d6",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "d703c5bd5f59b6dc",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "4bca7f56df3cd0c4",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "ed2606ab83eb25fc",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "0dd1703808ec3391",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "f8c1bcb701544089",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "dce5d194594a7518",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "8dd1b9e36804bda6",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "abe235dbadb8cb6e",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "0ae7784ddb358495",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "c7f4757000a6a2a2",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "3f10f4c5128fcbdc",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "c7f4757000a6a2a2",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "0453cf8d5c356634",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "757bf0949f4ff47c",
        "order": 2,
        "width": 4,
        "height": 1
    },
    {
        "id": "89417a2f86657509",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "757bf0949f4ff47c",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "d66f7e166649d2f5",
        "type": "ui_spacer",
        "z": "913a9fc678d69bed",
        "name": "spacer",
        "group": "757bf0949f4ff47c",
        "order": 9,
        "width": 9,
        "height": 1
    },
    {
        "id": "b69fe292e89f2d1a",
        "type": "MySQLdatabase",
        "name": "",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "nhietdodoam",
        "tz": "+7:00",
        "charset": "UTF8"
    },
    {
        "id": "3c5da821.6d5638",
        "type": "ui_group",
        "name": "Room",
        "tab": "f9ac9e91.20e588",
        "order": 2,
        "disp": false,
        "width": "23",
        "collapse": false
    },
    {
        "id": "e5d4ff983813d9d0",
        "type": "mqtt-broker",
        "name": "mqtt2",
        "broker": "testdoan1.cloud.shiftr.io",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "1111",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "222",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "e4734e2bb53e42d6",
        "type": "ui_group",
        "name": "Room2",
        "tab": "b88aa56dcce34936",
        "order": 2,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "dda5df23deffdb64",
        "type": "ui_group",
        "name": "Room2",
        "tab": "ab5226dd4577347e",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "4bca7f56df3cd0c4",
        "type": "ui_group",
        "name": "Room3",
        "tab": "b88aa56dcce34936",
        "order": 3,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "fe73659136b81ff9",
        "type": "ui_group",
        "name": "Room3",
        "tab": "ab5226dd4577347e",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "0dd1703808ec3391",
        "type": "ui_group",
        "name": "Room4",
        "tab": "b88aa56dcce34936",
        "order": 4,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "b603a047890100d2",
        "type": "ui_group",
        "name": "Room4",
        "tab": "ab5226dd4577347e",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "dce5d194594a7518",
        "type": "ui_group",
        "name": "Room5",
        "tab": "b88aa56dcce34936",
        "order": 5,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "77912f4d36e6d77f",
        "type": "ui_group",
        "name": "Room5",
        "tab": "ab5226dd4577347e",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "abe235dbadb8cb6e",
        "type": "ui_group",
        "name": "Room6",
        "tab": "b88aa56dcce34936",
        "order": 6,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "cbe45a2573a74db6",
        "type": "ui_group",
        "name": "Room6",
        "tab": "ab5226dd4577347e",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "e1facfe5b6fb4be1",
        "type": "ui_group",
        "name": "Room1",
        "tab": "b88aa56dcce34936",
        "order": 1,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "ac5a544713325796",
        "type": "ui_group",
        "name": "Room1",
        "tab": "ab5226dd4577347e",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "757bf0949f4ff47c",
        "type": "ui_group",
        "name": "Cài đặt điều khiển tự động",
        "tab": "f425879d8706d5a3",
        "order": 1,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "31f14418.dc50dc",
        "type": "ui_group",
        "name": "Report",
        "tab": "401d066a.62ae48",
        "order": 2,
        "disp": false,
        "width": "24"
    },
    {
        "id": "326a98d64cc222b3",
        "type": "ui_group",
        "name": "Trạng thái điều khiển tự động",
        "tab": "f425879d8706d5a3",
        "order": 2,
        "disp": true,
        "width": "9",
        "collapse": false
    },
    {
        "id": "f0851a8e318128ed",
        "type": "ui_group",
        "name": "TaskBar",
        "tab": "ab5226dd4577347e",
        "order": 1,
        "disp": false,
        "width": "3",
        "collapse": false
    },
    {
        "id": "c7f4757000a6a2a2",
        "type": "ui_group",
        "name": "Home and next",
        "tab": "b88aa56dcce34936",
        "order": 10,
        "disp": false,
        "width": 20,
        "collapse": false
    },
    {
        "id": "d1cc5f4707dc49d4",
        "type": "ui_group",
        "name": "Home and next",
        "tab": "f9ac9e91.20e588",
        "order": 2,
        "disp": false,
        "width": 23,
        "collapse": false
    },
    {
        "id": "c82b5368cc0324ed",
        "type": "ui_group",
        "name": "Chuyển hướng",
        "tab": "f425879d8706d5a3",
        "order": 4,
        "disp": true,
        "width": "18",
        "collapse": false
    },
    {
        "id": "e0e5648d9ce3eea5",
        "type": "ui_group",
        "name": "Các thiết bị khác",
        "tab": "f425879d8706d5a3",
        "order": 3,
        "disp": true,
        "width": 18,
        "collapse": false
    },
    {
        "id": "f9ac9e91.20e588",
        "type": "ui_tab",
        "name": "History",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b88aa56dcce34936",
        "type": "ui_tab",
        "name": "Room",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ab5226dd4577347e",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f425879d8706d5a3",
        "type": "ui_tab",
        "name": "Cài đặt",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "401d066a.62ae48",
        "type": "ui_tab",
        "name": "Report (New)",
        "icon": "event_note",
        "order": 6
    }
]